import{R as Ce,r as u,o as ce,m as de,S as ze,j as s,z as rt,C as dt,B as he,D as mo,T as ve,u as Ne,x as Ue,E as po,H as Ft,y as ut,I as Gt}from"./index-03_MIPtz.js";import{D as We}from"./cjs-CtrmK3Db.js";var le=function(){return le=Object.assign||function(t){for(var o,n=1,r=arguments.length;n<r;n++){o=arguments[n];for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(t[i]=o[i])}return t},le.apply(this,arguments)};function ht(e,t,o){if(o||arguments.length===2)for(var n=0,r=t.length,i;n<r;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))}var ne="-ms-",Xe="-moz-",ee="-webkit-",Sn="comm",yt="rule",Wt="decl",go="@import",Nn="@keyframes",vo="@layer",kn=Math.abs,Bt=String.fromCharCode,Lt=Object.assign;function bo(e,t){return ie(e,0)^45?(((t<<2^ie(e,0))<<2^ie(e,1))<<2^ie(e,2))<<2^ie(e,3):0}function Tn(e){return e.trim()}function we(e,t){return(e=t.exec(e))?e[0]:e}function U(e,t,o){return e.replace(t,o)}function st(e,t,o){return e.indexOf(t,o)}function ie(e,t){return e.charCodeAt(t)|0}function Ae(e,t,o){return e.slice(t,o)}function ye(e){return e.length}function _n(e){return e.length}function Ve(e,t){return t.push(e),e}function yo(e,t){return e.map(t).join("")}function Ut(e,t){return e.filter(function(o){return!we(o,t)})}var xt=1,Me=1,En=0,pe=0,re=0,Be="";function wt(e,t,o,n,r,i,a,c){return{value:e,root:t,parent:o,type:n,props:r,children:i,line:xt,column:Me,length:a,return:"",siblings:c}}function je(e,t){return Lt(wt("",null,null,"",null,null,0,e.siblings),e,{length:-e.length},t)}function Re(e){for(;e.root;)e=je(e.root,{children:[e]});Ve(e,e.siblings)}function xo(){return re}function wo(){return re=pe>0?ie(Be,--pe):0,Me--,re===10&&(Me=1,xt--),re}function ge(){return re=pe<En?ie(Be,pe++):0,Me++,re===10&&(Me=1,xt++),re}function _e(){return ie(Be,pe)}function it(){return pe}function Ct(e,t){return Ae(Be,e,t)}function Rt(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function Co(e){return xt=Me=1,En=ye(Be=e),pe=0,[]}function jo(e){return Be="",e}function _t(e){return Tn(Ct(pe-1,Pt(e===91?e+2:e===40?e+1:e)))}function So(e){for(;(re=_e())&&re<33;)ge();return Rt(e)>2||Rt(re)>3?"":" "}function No(e,t){for(;--t&&ge()&&!(re<48||re>102||re>57&&re<65||re>70&&re<97););return Ct(e,it()+(t<6&&_e()==32&&ge()==32))}function Pt(e){for(;ge();)switch(re){case e:return pe;case 34:case 39:e!==34&&e!==39&&Pt(re);break;case 40:e===41&&Pt(e);break;case 92:ge();break}return pe}function ko(e,t){for(;ge()&&e+re!==57;)if(e+re===84&&_e()===47)break;return"/*"+Ct(t,pe-1)+"*"+Bt(e===47?e:ge())}function To(e){for(;!Rt(_e());)ge();return Ct(e,pe)}function _o(e){return jo(at("",null,null,null,[""],e=Co(e),0,[0],e))}function at(e,t,o,n,r,i,a,c,h){for(var m=0,f=0,j=a,w=0,I=0,d=0,M=1,C=1,L=1,A=0,b="",O=r,l=i,S=n,v=b;C;)switch(d=A,A=ge()){case 40:if(d!=108&&ie(v,j-1)==58){st(v+=U(_t(A),"&","&\f"),"&\f",kn(m?c[m-1]:0))!=-1&&(L=-1);break}case 34:case 39:case 91:v+=_t(A);break;case 9:case 10:case 13:case 32:v+=So(d);break;case 92:v+=No(it()-1,7);continue;case 47:switch(_e()){case 42:case 47:Ve(Eo(ko(ge(),it()),t,o,h),h);break;default:v+="/"}break;case 123*M:c[m++]=ye(v)*L;case 125*M:case 59:case 0:switch(A){case 0:case 125:C=0;case 59+f:L==-1&&(v=U(v,/\f/g,"")),I>0&&ye(v)-j&&Ve(I>32?Jt(v+";",n,o,j-1,h):Jt(U(v," ","")+";",n,o,j-2,h),h);break;case 59:v+=";";default:if(Ve(S=Zt(v,t,o,m,f,r,c,b,O=[],l=[],j,i),i),A===123)if(f===0)at(v,t,S,S,O,i,j,c,l);else switch(w===99&&ie(v,3)===110?100:w){case 100:case 108:case 109:case 115:at(e,S,S,n&&Ve(Zt(e,S,S,0,0,r,c,b,r,O=[],j,l),l),r,l,j,c,n?O:l);break;default:at(v,S,S,S,[""],l,0,c,l)}}m=f=I=0,M=L=1,b=v="",j=a;break;case 58:j=1+ye(v),I=d;default:if(M<1){if(A==123)--M;else if(A==125&&M++==0&&wo()==125)continue}switch(v+=Bt(A),A*M){case 38:L=f>0?1:(v+="\f",-1);break;case 44:c[m++]=(ye(v)-1)*L,L=1;break;case 64:_e()===45&&(v+=_t(ge())),w=_e(),f=j=ye(b=v+=To(it())),A++;break;case 45:d===45&&ye(v)==2&&(M=0)}}return i}function Zt(e,t,o,n,r,i,a,c,h,m,f,j){for(var w=r-1,I=r===0?i:[""],d=_n(I),M=0,C=0,L=0;M<n;++M)for(var A=0,b=Ae(e,w+1,w=kn(C=a[M])),O=e;A<d;++A)(O=Tn(C>0?I[A]+" "+b:U(b,/&\f/g,I[A])))&&(h[L++]=O);return wt(e,t,o,r===0?yt:c,h,m,f,j)}function Eo(e,t,o,n){return wt(e,t,o,Sn,Bt(xo()),Ae(e,2,-2),0,n)}function Jt(e,t,o,n,r){return wt(e,t,o,Wt,Ae(e,0,n),Ae(e,n+1,-1),n,r)}function In(e,t,o){switch(bo(e,t)){case 5103:return ee+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return ee+e+e;case 4789:return Xe+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return ee+e+Xe+e+ne+e+e;case 5936:switch(ie(e,t+11)){case 114:return ee+e+ne+U(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return ee+e+ne+U(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return ee+e+ne+U(e,/[svh]\w+-[tblr]{2}/,"lr")+e}case 6828:case 4268:case 2903:return ee+e+ne+e+e;case 6165:return ee+e+ne+"flex-"+e+e;case 5187:return ee+e+U(e,/(\w+).+(:[^]+)/,ee+"box-$1$2"+ne+"flex-$1$2")+e;case 5443:return ee+e+ne+"flex-item-"+U(e,/flex-|-self/g,"")+(we(e,/flex-|baseline/)?"":ne+"grid-row-"+U(e,/flex-|-self/g,""))+e;case 4675:return ee+e+ne+"flex-line-pack"+U(e,/align-content|flex-|-self/g,"")+e;case 5548:return ee+e+ne+U(e,"shrink","negative")+e;case 5292:return ee+e+ne+U(e,"basis","preferred-size")+e;case 6060:return ee+"box-"+U(e,"-grow","")+ee+e+ne+U(e,"grow","positive")+e;case 4554:return ee+U(e,/([^-])(transform)/g,"$1"+ee+"$2")+e;case 6187:return U(U(U(e,/(zoom-|grab)/,ee+"$1"),/(image-set)/,ee+"$1"),e,"")+e;case 5495:case 3959:return U(e,/(image-set\([^]*)/,ee+"$1$`$1");case 4968:return U(U(e,/(.+:)(flex-)?(.*)/,ee+"box-pack:$3"+ne+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+ee+e+e;case 4200:if(!we(e,/flex-|baseline/))return ne+"grid-column-align"+Ae(e,t)+e;break;case 2592:case 3360:return ne+U(e,"template-","")+e;case 4384:case 3616:return o&&o.some(function(n,r){return t=r,we(n.props,/grid-\w+-end/)})?~st(e+(o=o[t].value),"span",0)?e:ne+U(e,"-start","")+e+ne+"grid-row-span:"+(~st(o,"span",0)?we(o,/\d+/):+we(o,/\d+/)-+we(e,/\d+/))+";":ne+U(e,"-start","")+e;case 4896:case 4128:return o&&o.some(function(n){return we(n.props,/grid-\w+-start/)})?e:ne+U(U(e,"-end","-span"),"span ","")+e;case 4095:case 3583:case 4068:case 2532:return U(e,/(.+)-inline(.+)/,ee+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(ye(e)-1-t>6)switch(ie(e,t+1)){case 109:if(ie(e,t+4)!==45)break;case 102:return U(e,/(.+:)(.+)-([^]+)/,"$1"+ee+"$2-$3$1"+Xe+(ie(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~st(e,"stretch",0)?In(U(e,"stretch","fill-available"),t,o)+e:e}break;case 5152:case 5920:return U(e,/(.+?):(\d+)(\s*\/\s*(span)?\s*(\d+))?(.*)/,function(n,r,i,a,c,h,m){return ne+r+":"+i+m+(a?ne+r+"-span:"+(c?h:+h-+i)+m:"")+e});case 4949:if(ie(e,t+6)===121)return U(e,":",":"+ee)+e;break;case 6444:switch(ie(e,ie(e,14)===45?18:11)){case 120:return U(e,/(.+:)([^;\s!]+)(;|(\s+)?!.+)?/,"$1"+ee+(ie(e,14)===45?"inline-":"")+"box$3$1"+ee+"$2$3$1"+ne+"$2box$3")+e;case 100:return U(e,":",":"+ne)+e}break;case 5719:case 2647:case 2135:case 3927:case 2391:return U(e,"scroll-","scroll-snap-")+e}return e}function ft(e,t){for(var o="",n=0;n<e.length;n++)o+=t(e[n],n,e,t)||"";return o}function Io(e,t,o,n){switch(e.type){case vo:if(e.children.length)break;case go:case Wt:return e.return=e.return||e.value;case Sn:return"";case Nn:return e.return=e.value+"{"+ft(e.children,n)+"}";case yt:if(!ye(e.value=e.props.join(",")))return""}return ye(o=ft(e.children,n))?e.return=e.value+"{"+o+"}":""}function zo(e){var t=_n(e);return function(o,n,r,i){for(var a="",c=0;c<t;c++)a+=e[c](o,n,r,i)||"";return a}}function $o(e){return function(t){t.root||(t=t.return)&&e(t)}}function Lo(e,t,o,n){if(e.length>-1&&!e.return)switch(e.type){case Wt:e.return=In(e.value,e.length,o);return;case Nn:return ft([je(e,{value:U(e.value,"@","@"+ee)})],n);case yt:if(e.length)return yo(o=e.props,function(r){switch(we(r,n=/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":Re(je(e,{props:[U(r,/:(read-\w+)/,":"+Xe+"$1")]})),Re(je(e,{props:[r]})),Lt(e,{props:Ut(o,n)});break;case"::placeholder":Re(je(e,{props:[U(r,/:(plac\w+)/,":"+ee+"input-$1")]})),Re(je(e,{props:[U(r,/:(plac\w+)/,":"+Xe+"$1")]})),Re(je(e,{props:[U(r,/:(plac\w+)/,ne+"input-$1")]})),Re(je(e,{props:[r]})),Lt(e,{props:Ut(o,n)});break}return""})}}var Ro={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},ue={},Oe=typeof process<"u"&&ue!==void 0&&(ue.REACT_APP_SC_ATTR||ue.SC_ATTR)||"data-styled",zn="active",$n="data-styled-version",jt="6.1.13",Ht=`/*!sc*/
`,mt=typeof window<"u"&&"HTMLElement"in window,Po=!!(typeof SC_DISABLE_SPEEDY=="boolean"?SC_DISABLE_SPEEDY:typeof process<"u"&&ue!==void 0&&ue.REACT_APP_SC_DISABLE_SPEEDY!==void 0&&ue.REACT_APP_SC_DISABLE_SPEEDY!==""?ue.REACT_APP_SC_DISABLE_SPEEDY!=="false"&&ue.REACT_APP_SC_DISABLE_SPEEDY:typeof process<"u"&&ue!==void 0&&ue.SC_DISABLE_SPEEDY!==void 0&&ue.SC_DISABLE_SPEEDY!==""&&ue.SC_DISABLE_SPEEDY!=="false"&&ue.SC_DISABLE_SPEEDY),St=Object.freeze([]),Fe=Object.freeze({});function Do(e,t,o){return o===void 0&&(o=Fe),e.theme!==o.theme&&e.theme||t||o.theme}var Ln=new Set(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","u","ul","use","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]),Ao=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,Mo=/(^-|-$)/g;function Qt(e){return e.replace(Ao,"-").replace(Mo,"")}var Oo=/(a)(d)/gi,nt=52,qt=function(e){return String.fromCharCode(e+(e>25?39:97))};function Dt(e){var t,o="";for(t=Math.abs(e);t>nt;t=t/nt|0)o=qt(t%nt)+o;return(qt(t%nt)+o).replace(Oo,"$1-$2")}var Et,Rn=5381,Pe=function(e,t){for(var o=t.length;o;)e=33*e^t.charCodeAt(--o);return e},Pn=function(e){return Pe(Rn,e)};function Fo(e){return Dt(Pn(e)>>>0)}function Go(e){return e.displayName||e.name||"Component"}function It(e){return typeof e=="string"&&!0}var Dn=typeof Symbol=="function"&&Symbol.for,An=Dn?Symbol.for("react.memo"):60115,Wo=Dn?Symbol.for("react.forward_ref"):60112,Bo={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},Ho={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},Mn={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},Ko=((Et={})[Wo]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Et[An]=Mn,Et);function en(e){return("type"in(t=e)&&t.type.$$typeof)===An?Mn:"$$typeof"in e?Ko[e.$$typeof]:Bo;var t}var Yo=Object.defineProperty,Vo=Object.getOwnPropertyNames,tn=Object.getOwnPropertySymbols,Xo=Object.getOwnPropertyDescriptor,Uo=Object.getPrototypeOf,nn=Object.prototype;function On(e,t,o){if(typeof t!="string"){if(nn){var n=Uo(t);n&&n!==nn&&On(e,n,o)}var r=Vo(t);tn&&(r=r.concat(tn(t)));for(var i=en(e),a=en(t),c=0;c<r.length;++c){var h=r[c];if(!(h in Ho||o&&o[h]||a&&h in a||i&&h in i)){var m=Xo(t,h);try{Yo(e,h,m)}catch{}}}}return e}function Ge(e){return typeof e=="function"}function Kt(e){return typeof e=="object"&&"styledComponentId"in e}function Te(e,t){return e&&t?"".concat(e," ").concat(t):e||t||""}function on(e,t){if(e.length===0)return"";for(var o=e[0],n=1;n<e.length;n++)o+=e[n];return o}function Ze(e){return e!==null&&typeof e=="object"&&e.constructor.name===Object.name&&!("props"in e&&e.$$typeof)}function At(e,t,o){if(o===void 0&&(o=!1),!o&&!Ze(e)&&!Array.isArray(e))return t;if(Array.isArray(t))for(var n=0;n<t.length;n++)e[n]=At(e[n],t[n]);else if(Ze(t))for(var n in t)e[n]=At(e[n],t[n]);return e}function Yt(e,t){Object.defineProperty(e,"toString",{value:t})}function Qe(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];return new Error("An error occurred. See https://github.com/styled-components/styled-components/blob/main/packages/styled-components/src/utils/errors.md#".concat(e," for more information.").concat(t.length>0?" Args: ".concat(t.join(", ")):""))}var Zo=function(){function e(t){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=t}return e.prototype.indexOfGroup=function(t){for(var o=0,n=0;n<t;n++)o+=this.groupSizes[n];return o},e.prototype.insertRules=function(t,o){if(t>=this.groupSizes.length){for(var n=this.groupSizes,r=n.length,i=r;t>=i;)if((i<<=1)<0)throw Qe(16,"".concat(t));this.groupSizes=new Uint32Array(i),this.groupSizes.set(n),this.length=i;for(var a=r;a<i;a++)this.groupSizes[a]=0}for(var c=this.indexOfGroup(t+1),h=(a=0,o.length);a<h;a++)this.tag.insertRule(c,o[a])&&(this.groupSizes[t]++,c++)},e.prototype.clearGroup=function(t){if(t<this.length){var o=this.groupSizes[t],n=this.indexOfGroup(t),r=n+o;this.groupSizes[t]=0;for(var i=n;i<r;i++)this.tag.deleteRule(n)}},e.prototype.getGroup=function(t){var o="";if(t>=this.length||this.groupSizes[t]===0)return o;for(var n=this.groupSizes[t],r=this.indexOfGroup(t),i=r+n,a=r;a<i;a++)o+="".concat(this.tag.getRule(a)).concat(Ht);return o},e}(),lt=new Map,pt=new Map,ct=1,ot=function(e){if(lt.has(e))return lt.get(e);for(;pt.has(ct);)ct++;var t=ct++;return lt.set(e,t),pt.set(t,e),t},Jo=function(e,t){ct=t+1,lt.set(e,t),pt.set(t,e)},Qo="style[".concat(Oe,"][").concat($n,'="').concat(jt,'"]'),qo=new RegExp("^".concat(Oe,'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)')),er=function(e,t,o){for(var n,r=o.split(","),i=0,a=r.length;i<a;i++)(n=r[i])&&e.registerName(t,n)},tr=function(e,t){for(var o,n=((o=t.textContent)!==null&&o!==void 0?o:"").split(Ht),r=[],i=0,a=n.length;i<a;i++){var c=n[i].trim();if(c){var h=c.match(qo);if(h){var m=0|parseInt(h[1],10),f=h[2];m!==0&&(Jo(f,m),er(e,f,h[3]),e.getTag().insertRules(m,r)),r.length=0}else r.push(c)}}},rn=function(e){for(var t=document.querySelectorAll(Qo),o=0,n=t.length;o<n;o++){var r=t[o];r&&r.getAttribute(Oe)!==zn&&(tr(e,r),r.parentNode&&r.parentNode.removeChild(r))}};function nr(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:null}var Fn=function(e){var t=document.head,o=e||t,n=document.createElement("style"),r=function(c){var h=Array.from(c.querySelectorAll("style[".concat(Oe,"]")));return h[h.length-1]}(o),i=r!==void 0?r.nextSibling:null;n.setAttribute(Oe,zn),n.setAttribute($n,jt);var a=nr();return a&&n.setAttribute("nonce",a),o.insertBefore(n,i),n},or=function(){function e(t){this.element=Fn(t),this.element.appendChild(document.createTextNode("")),this.sheet=function(o){if(o.sheet)return o.sheet;for(var n=document.styleSheets,r=0,i=n.length;r<i;r++){var a=n[r];if(a.ownerNode===o)return a}throw Qe(17)}(this.element),this.length=0}return e.prototype.insertRule=function(t,o){try{return this.sheet.insertRule(o,t),this.length++,!0}catch{return!1}},e.prototype.deleteRule=function(t){this.sheet.deleteRule(t),this.length--},e.prototype.getRule=function(t){var o=this.sheet.cssRules[t];return o&&o.cssText?o.cssText:""},e}(),rr=function(){function e(t){this.element=Fn(t),this.nodes=this.element.childNodes,this.length=0}return e.prototype.insertRule=function(t,o){if(t<=this.length&&t>=0){var n=document.createTextNode(o);return this.element.insertBefore(n,this.nodes[t]||null),this.length++,!0}return!1},e.prototype.deleteRule=function(t){this.element.removeChild(this.nodes[t]),this.length--},e.prototype.getRule=function(t){return t<this.length?this.nodes[t].textContent:""},e}(),sr=function(){function e(t){this.rules=[],this.length=0}return e.prototype.insertRule=function(t,o){return t<=this.length&&(this.rules.splice(t,0,o),this.length++,!0)},e.prototype.deleteRule=function(t){this.rules.splice(t,1),this.length--},e.prototype.getRule=function(t){return t<this.length?this.rules[t]:""},e}(),sn=mt,ir={isServer:!mt,useCSSOMInjection:!Po},Gn=function(){function e(t,o,n){t===void 0&&(t=Fe),o===void 0&&(o={});var r=this;this.options=le(le({},ir),t),this.gs=o,this.names=new Map(n),this.server=!!t.isServer,!this.server&&mt&&sn&&(sn=!1,rn(this)),Yt(this,function(){return function(i){for(var a=i.getTag(),c=a.length,h="",m=function(j){var w=function(L){return pt.get(L)}(j);if(w===void 0)return"continue";var I=i.names.get(w),d=a.getGroup(j);if(I===void 0||!I.size||d.length===0)return"continue";var M="".concat(Oe,".g").concat(j,'[id="').concat(w,'"]'),C="";I!==void 0&&I.forEach(function(L){L.length>0&&(C+="".concat(L,","))}),h+="".concat(d).concat(M,'{content:"').concat(C,'"}').concat(Ht)},f=0;f<c;f++)m(f);return h}(r)})}return e.registerId=function(t){return ot(t)},e.prototype.rehydrate=function(){!this.server&&mt&&rn(this)},e.prototype.reconstructWithOptions=function(t,o){return o===void 0&&(o=!0),new e(le(le({},this.options),t),this.gs,o&&this.names||void 0)},e.prototype.allocateGSInstance=function(t){return this.gs[t]=(this.gs[t]||0)+1},e.prototype.getTag=function(){return this.tag||(this.tag=(t=function(o){var n=o.useCSSOMInjection,r=o.target;return o.isServer?new sr(r):n?new or(r):new rr(r)}(this.options),new Zo(t)));var t},e.prototype.hasNameForId=function(t,o){return this.names.has(t)&&this.names.get(t).has(o)},e.prototype.registerName=function(t,o){if(ot(t),this.names.has(t))this.names.get(t).add(o);else{var n=new Set;n.add(o),this.names.set(t,n)}},e.prototype.insertRules=function(t,o,n){this.registerName(t,o),this.getTag().insertRules(ot(t),n)},e.prototype.clearNames=function(t){this.names.has(t)&&this.names.get(t).clear()},e.prototype.clearRules=function(t){this.getTag().clearGroup(ot(t)),this.clearNames(t)},e.prototype.clearTag=function(){this.tag=void 0},e}(),ar=/&/g,lr=/^\s*\/\/.*$/gm;function Wn(e,t){return e.map(function(o){return o.type==="rule"&&(o.value="".concat(t," ").concat(o.value),o.value=o.value.replaceAll(",",",".concat(t," ")),o.props=o.props.map(function(n){return"".concat(t," ").concat(n)})),Array.isArray(o.children)&&o.type!=="@keyframes"&&(o.children=Wn(o.children,t)),o})}function cr(e){var t,o,n,r=Fe,i=r.options,a=i===void 0?Fe:i,c=r.plugins,h=c===void 0?St:c,m=function(w,I,d){return d.startsWith(o)&&d.endsWith(o)&&d.replaceAll(o,"").length>0?".".concat(t):w},f=h.slice();f.push(function(w){w.type===yt&&w.value.includes("&")&&(w.props[0]=w.props[0].replace(ar,o).replace(n,m))}),a.prefix&&f.push(Lo),f.push(Io);var j=function(w,I,d,M){I===void 0&&(I=""),d===void 0&&(d=""),M===void 0&&(M="&"),t=M,o=I,n=new RegExp("\\".concat(o,"\\b"),"g");var C=w.replace(lr,""),L=_o(d||I?"".concat(d," ").concat(I," { ").concat(C," }"):C);a.namespace&&(L=Wn(L,a.namespace));var A=[];return ft(L,zo(f.concat($o(function(b){return A.push(b)})))),A};return j.hash=h.length?h.reduce(function(w,I){return I.name||Qe(15),Pe(w,I.name)},Rn).toString():"",j}var dr=new Gn,Mt=cr(),Bn=Ce.createContext({shouldForwardProp:void 0,styleSheet:dr,stylis:Mt});Bn.Consumer;Ce.createContext(void 0);function an(){return u.useContext(Bn)}var ur=function(){function e(t,o){var n=this;this.inject=function(r,i){i===void 0&&(i=Mt);var a=n.name+i.hash;r.hasNameForId(n.id,a)||r.insertRules(n.id,a,i(n.rules,a,"@keyframes"))},this.name=t,this.id="sc-keyframes-".concat(t),this.rules=o,Yt(this,function(){throw Qe(12,String(n.name))})}return e.prototype.getName=function(t){return t===void 0&&(t=Mt),this.name+t.hash},e}(),hr=function(e){return e>="A"&&e<="Z"};function ln(e){for(var t="",o=0;o<e.length;o++){var n=e[o];if(o===1&&n==="-"&&e[0]==="-")return e;hr(n)?t+="-"+n.toLowerCase():t+=n}return t.startsWith("ms-")?"-"+t:t}var Hn=function(e){return e==null||e===!1||e===""},Kn=function(e){var t,o,n=[];for(var r in e){var i=e[r];e.hasOwnProperty(r)&&!Hn(i)&&(Array.isArray(i)&&i.isCss||Ge(i)?n.push("".concat(ln(r),":"),i,";"):Ze(i)?n.push.apply(n,ht(ht(["".concat(r," {")],Kn(i),!1),["}"],!1)):n.push("".concat(ln(r),": ").concat((t=r,(o=i)==null||typeof o=="boolean"||o===""?"":typeof o!="number"||o===0||t in Ro||t.startsWith("--")?String(o).trim():"".concat(o,"px")),";")))}return n};function Ee(e,t,o,n){if(Hn(e))return[];if(Kt(e))return[".".concat(e.styledComponentId)];if(Ge(e)){if(!Ge(i=e)||i.prototype&&i.prototype.isReactComponent||!t)return[e];var r=e(t);return Ee(r,t,o,n)}var i;return e instanceof ur?o?(e.inject(o,n),[e.getName(n)]):[e]:Ze(e)?Kn(e):Array.isArray(e)?Array.prototype.concat.apply(St,e.map(function(a){return Ee(a,t,o,n)})):[e.toString()]}function fr(e){for(var t=0;t<e.length;t+=1){var o=e[t];if(Ge(o)&&!Kt(o))return!1}return!0}var mr=Pn(jt),pr=function(){function e(t,o,n){this.rules=t,this.staticRulesId="",this.isStatic=(n===void 0||n.isStatic)&&fr(t),this.componentId=o,this.baseHash=Pe(mr,o),this.baseStyle=n,Gn.registerId(o)}return e.prototype.generateAndInjectStyles=function(t,o,n){var r=this.baseStyle?this.baseStyle.generateAndInjectStyles(t,o,n):"";if(this.isStatic&&!n.hash)if(this.staticRulesId&&o.hasNameForId(this.componentId,this.staticRulesId))r=Te(r,this.staticRulesId);else{var i=on(Ee(this.rules,t,o,n)),a=Dt(Pe(this.baseHash,i)>>>0);if(!o.hasNameForId(this.componentId,a)){var c=n(i,".".concat(a),void 0,this.componentId);o.insertRules(this.componentId,a,c)}r=Te(r,a),this.staticRulesId=a}else{for(var h=Pe(this.baseHash,n.hash),m="",f=0;f<this.rules.length;f++){var j=this.rules[f];if(typeof j=="string")m+=j;else if(j){var w=on(Ee(j,t,o,n));h=Pe(h,w+f),m+=w}}if(m){var I=Dt(h>>>0);o.hasNameForId(this.componentId,I)||o.insertRules(this.componentId,I,n(m,".".concat(I),void 0,this.componentId)),r=Te(r,I)}}return r},e}(),Yn=Ce.createContext(void 0);Yn.Consumer;var zt={};function gr(e,t,o){var n=Kt(e),r=e,i=!It(e),a=t.attrs,c=a===void 0?St:a,h=t.componentId,m=h===void 0?function(O,l){var S=typeof O!="string"?"sc":Qt(O);zt[S]=(zt[S]||0)+1;var v="".concat(S,"-").concat(Fo(jt+S+zt[S]));return l?"".concat(l,"-").concat(v):v}(t.displayName,t.parentComponentId):h,f=t.displayName,j=f===void 0?function(O){return It(O)?"styled.".concat(O):"Styled(".concat(Go(O),")")}(e):f,w=t.displayName&&t.componentId?"".concat(Qt(t.displayName),"-").concat(t.componentId):t.componentId||m,I=n&&r.attrs?r.attrs.concat(c).filter(Boolean):c,d=t.shouldForwardProp;if(n&&r.shouldForwardProp){var M=r.shouldForwardProp;if(t.shouldForwardProp){var C=t.shouldForwardProp;d=function(O,l){return M(O,l)&&C(O,l)}}else d=M}var L=new pr(o,w,n?r.componentStyle:void 0);function A(O,l){return function(S,v,W){var X=S.attrs,G=S.componentStyle,Q=S.defaultProps,p=S.foldedComponentIds,z=S.styledComponentId,P=S.target,K=Ce.useContext(Yn),D=an(),Y=S.shouldForwardProp||D.shouldForwardProp,_=Do(v,K,Q)||Fe,y=function(F,B,k){for(var $,R=le(le({},B),{className:void 0,theme:k}),H=0;H<F.length;H+=1){var V=Ge($=F[H])?$(R):$;for(var Z in V)R[Z]=Z==="className"?Te(R[Z],V[Z]):Z==="style"?le(le({},R[Z]),V[Z]):V[Z]}return B.className&&(R.className=Te(R.className,B.className)),R}(X,v,_),E=y.as||P,g={};for(var N in y)y[N]===void 0||N[0]==="$"||N==="as"||N==="theme"&&y.theme===_||(N==="forwardedAs"?g.as=y.forwardedAs:Y&&!Y(N,E)||(g[N]=y[N]));var T=function(F,B){var k=an(),$=F.generateAndInjectStyles(B,k.styleSheet,k.stylis);return $}(G,y),x=Te(p,z);return T&&(x+=" "+T),y.className&&(x+=" "+y.className),g[It(E)&&!Ln.has(E)?"class":"className"]=x,g.ref=W,u.createElement(E,g)}(b,O,l)}A.displayName=j;var b=Ce.forwardRef(A);return b.attrs=I,b.componentStyle=L,b.displayName=j,b.shouldForwardProp=d,b.foldedComponentIds=n?Te(r.foldedComponentIds,r.styledComponentId):"",b.styledComponentId=w,b.target=n?r.target:e,Object.defineProperty(b,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(O){this._foldedDefaultProps=n?function(l){for(var S=[],v=1;v<arguments.length;v++)S[v-1]=arguments[v];for(var W=0,X=S;W<X.length;W++)At(l,X[W],!0);return l}({},r.defaultProps,O):O}}),Yt(b,function(){return".".concat(b.styledComponentId)}),i&&On(b,e,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0}),b}function cn(e,t){for(var o=[e[0]],n=0,r=t.length;n<r;n+=1)o.push(t[n],e[n+1]);return o}var dn=function(e){return Object.assign(e,{isCss:!0})};function vr(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];if(Ge(e)||Ze(e))return dn(Ee(cn(St,ht([e],t,!0))));var n=e;return t.length===0&&n.length===1&&typeof n[0]=="string"?Ee(n):dn(Ee(cn(n,t)))}function Ot(e,t,o){if(o===void 0&&(o=Fe),!t)throw Qe(1,t);var n=function(r){for(var i=[],a=1;a<arguments.length;a++)i[a-1]=arguments[a];return e(t,o,vr.apply(void 0,ht([r],i,!1)))};return n.attrs=function(r){return Ot(e,t,le(le({},o),{attrs:Array.prototype.concat(o.attrs,r).filter(Boolean)}))},n.withConfig=function(r){return Ot(e,t,le(le({},o),r))},n}var Vn=function(e){return Ot(gr,e)},ke=Vn;Ln.forEach(function(e){ke[e]=Vn(e)});const br=ke.div`
  max-width: 1000px;
  max-height: 1000px;
  position: relative;
  left: ${e=>{var t;return Math.ceil((.6*((t=e.layoutDetails)==null?void 0:t.displayScale)-.1)*100)}}%;
  top: 50%;
  width: ${e=>{var t;return(t=e.layoutBody)==null?void 0:t.width}}px;
  height: ${e=>{var t;return(t=e.layoutBody)==null?void 0:t.height}}px;
  border: ${e=>{var t;return(t=e.layoutBody)==null?void 0:t.borderSize}}px solid #000000;
  border-radius: ${e=>{var t;return(t=e.layoutBody)==null?void 0:t.borderRadius}}%;
  background-color: ${e=>{var t;return(t=e.layoutBody)==null?void 0:t.backgroundColor}};
  overflow: hidden;
  transform-origin: center;
  transform: translate(-50%, -50%)
    ${e=>e.resize?"resize: both; overflow: hidden;":""};
`,yr=({children:e})=>{const{layoutBody:t,floorPlan:o,setLayoutBody:n,setLayoutDetails:r,updateLayout:i,layoutId:a,isSelected:c,setIsSelected:h,layoutRef:m,layoutDetails:f}=u.useContext(ce);de();const{showShapeForm:j}=u.useContext(ze);let w=document.querySelector("#layout-styled-div");u.useEffect(()=>{t!=null&&t.layoutType&&w&&(w.style.removeProperty("width"),w.style.removeProperty("height"))},[t]),u.useEffect(()=>{const d=new ResizeObserver(M=>{for(let C of M){const{width:L,height:A}=C.contentRect;L&&A&&(n(b=>({...b,width:L,height:A})),r(b=>({...b,width:L,height:A})))}});return m.current&&d.observe(m.current),()=>{m.current&&d.unobserve(m.current)}},[]);const I=()=>{h(!0)};return s.jsxs(br,{layoutBody:t,id:o||t.layoutType?"layout-styled-div":"onhold-layout",className:`layout-${t.layoutType}-border`,ref:m,resize:!j&&c&&o,onClick:I,layoutDetails:f,children:[" ",s.jsx("div",{className:o||t.layoutType?`layout-${t.layoutType}`:"transparent",style:{border:"2px solid black"},children:e})]})},xr=()=>{const{addCircle:e,addSquare:t,setShowShapes:o,showShapes:n}=u.useContext(ze),{layoutBody:r}=u.useContext(ce),i=document.querySelector(".display-shapes-container");i==null||i.offsetWidth;const a=de(),[c,h]=u.useState({shapeType:"circle",name:"",width:100,height:100,borderSize:1,borderLeftSize:0,borderLeftColor:"",borderRightSize:0,borderRightColor:"",borderBottomSize:0,borderBottomColor:"",borderTopSize:0,borderTopColor:"",borderColor:"black",backgroundColor:"black",color:"white",justifyContent:"",alignItems:"",x:r.width/2-50,y:r.height/2-50,offSetX:0,offSetY:0,fontSize:15});return s.jsxs("div",{className:n?"showshapes-false":"shape-tools-container",children:[s.jsx("h1",{className:"shape-tools-title",children:"Add New Shape"}),s.jsxs("div",{className:"shape-content",children:[s.jsx("div",{className:"shape-cirlce",onClick:()=>e(a.layoutIdParam,c)}),s.jsx("div",{className:"shape-square",onClick:()=>t(a.layoutIdParam,c)})]})]})},wr=({children:e})=>{const{layoutDetails:t,layoutBody:o,setLayoutBody:n,floorPlan:r,setFloorPlan:i,setLayoutDetails:a,setIsSelected:c}=u.useContext(ce),[h,m]=u.useState(!1),f=de(),[j,w]=u.useState(null),[I,d]=u.useState(null),M=document.querySelector(".design-container");u.useEffect(()=>{n({width:t==null?void 0:t.width,maxWidth:M==null?void 0:M.offsetWidth,height:t==null?void 0:t.height,maxHeight:(M==null?void 0:M.offsetHeight)*.93,borderRadius:t==null?void 0:t.borderRadius,borderSize:t==null?void 0:t.borderSize,containerScale:t==null?void 0:t.containerScale,x:t==null?void 0:t.x,y:t==null?void 0:t.y,layoutType:t==null?void 0:t.layoutType}),m(!1)},[t]),u.useEffect(()=>{const v=document.querySelector(".design-container");v&&n(W=>({...W,maxWidth:v.offsetWidth,maxHeight:v.offsetHeight*.93}))},[o.height,o.width]);const C=async v=>{n(W=>({...W,layoutType:v})),a(W=>({...W,layoutType:v})),i(!0),c(W=>!W)};function L(v,W){let X;return function(...Q){const p=()=>{clearTimeout(X),v(...Q)};clearTimeout(X),X=setTimeout(p,W)}}const A=async()=>{let v=t;v==null||delete v.blocks;try{const W=await rt(f.layoutIdParam,v);W.success&&w(W.message),setTimeout(()=>{w(null)},2e3),m(!1)}catch(W){console.log("The error:",W.response),d(W.response.message),setTimeout(()=>{d(null)},2e3)}};u.useEffect(()=>{L(A(),1e3)},[h,r]);const b=v=>{const{name:W,value:X}=v.target;n(G=>({...G,[W]:X})),m(!0)},[O,l]=u.useState(null);u.useState("border");const S=v=>{l(W=>W===v?null:v)};return s.jsxs("div",{children:[s.jsxs("form",{className:r||o.layoutType?"layout-tools-container":"layout-tools-container hide",children:[s.jsx("h1",{className:"layout-tools-title",children:"Layout Tools"}),s.jsxs("div",{className:"layout-tools-spacing",children:[s.jsxs("div",{className:"dropdown-container",onClick:()=>S(1),children:[s.jsx("h1",{className:"layout-text-input-title",children:"Size & Color"}),s.jsx("div",{className:O===1?"down-arrow":"up-arrow"})]}),s.jsxs("div",{className:O===1?"show-dropdown":"hide-dropdown",children:[s.jsxs("div",{className:"layout-input-range-container",children:[s.jsxs("div",{className:"layout-tools-content",children:[s.jsx("label",{htmlFor:"width",children:"Width"}),s.jsx("input",{type:"number",value:o.width,name:"width",min:100,max:o.maxWidth,onChange:b})]}),s.jsx("input",{type:"range",className:"range",name:"width",onChange:b,value:o==null?void 0:o.width,min:10,max:o.maxWidth})]}),s.jsxs("div",{className:"layout-input-range-container",children:[s.jsxs("div",{className:"layout-tools-content",children:[s.jsx("label",{htmlFor:"height",children:"height"}),s.jsx("input",{type:"number",value:o.height,name:"height",onChange:b,min:100,max:o.maxHeight})]}),s.jsx("input",{type:"range",className:"range",name:"height",onChange:b,value:o==null?void 0:o.height,min:10,max:o.maxHeight})]}),s.jsx("div",{className:"layout-background-input-container",children:s.jsx("input",{type:"color",className:"layout-background-input",value:o.backgroundColor,name:"backgroundColor",defaultValue:"trans",onChange:b})})]}),I&&s.jsx("h1",{className:"layout-tools-Notsuccess",children:I})]}),e]}),s.jsxs("div",{className:r||o.layoutType?"hide":"select-floorplan-container",children:[s.jsx("h1",{className:"floorplan-title",children:"Select A Floor Plan"}),s.jsxs("div",{className:"floorplan-shapes-container",children:[s.jsx("div",{className:"floorplan-square",onClick:()=>C("square")}),s.jsx("div",{className:"floorplan-circle",onClick:()=>C("circle")}),s.jsx("div",{className:"floorplan-ellipse-border",children:s.jsx("div",{className:"floorplan-ellipse",onClick:()=>C("ellipse")})}),s.jsx("div",{className:"floorplan-triangle-border",children:s.jsx("div",{className:"floorplan-triangle",onClick:()=>C("triangle")})}),s.jsx("div",{className:"floorplan-poligon-1-border",children:s.jsx("div",{className:"floorplan-poligon-1",onClick:()=>C("poligon-1")})}),s.jsx("div",{className:"floorplan-poligon-2-border",onClick:()=>C("poligon-2"),children:s.jsx("div",{className:"floorplan-poligon-2"})})]})]})]})},Cr=ke.div`
  width: ${e=>{var t;return(t=e.circle)==null?void 0:t.width}}px;
  height: ${e=>{var t;return(t=e.circle)==null?void 0:t.width}}px;
  border-radius: ${e=>{var t;return((t=e.circle)==null?void 0:t.borderRadius)||50}}%;
  background-color: ${e=>{var t;return(t=e.circle)==null?void 0:t.backgroundColor}};
  // border: ${e=>{var t;return(t=e.circle)==null?void 0:t.borderSize}}px solid
  //   ${e=>{var t;return(t=e.circle)==null?void 0:t.borderColor}};
  border-left: ${e=>{var t,o,n,r;return(t=e.circle)!=null&&t.borderLeftSize||((o=e.circle)==null?void 0:o.borderLeftSize)===0?(n=e.circle)==null?void 0:n.borderLeftSize:(r=e.circle)==null?void 0:r.borderSize}}px
    solid
    ${e=>{var t,o,n;return(t=e.circle)!=null&&t.borderLeftColor?(o=e.circle)==null?void 0:o.borderLeftColor:(n=e.circle)==null?void 0:n.borderColor}};
  border-right: ${e=>{var t,o,n,r;return(t=e.circle)!=null&&t.borderRightSize||((o=e.circle)==null?void 0:o.borderRightSize)===0?(n=e.circle)==null?void 0:n.borderRightSize:(r=e.circle)==null?void 0:r.borderSize}}px
    solid
    ${e=>{var t,o,n;return(t=e.circle)!=null&&t.borderRightColor?(o=e.circle)==null?void 0:o.borderRightColor:(n=e.circle)==null?void 0:n.borderColor}};
  border-bottom: ${e=>{var t,o,n,r;return(t=e.circle)!=null&&t.borderBottomSize||((o=e.circle)==null?void 0:o.borderBottomSize)===0?(n=e.circle)==null?void 0:n.borderBottomSize:(r=e.circle)==null?void 0:r.borderSize}}px
    solid
    ${e=>{var t,o,n;return(t=e.circle)!=null&&t.borderBottomColor?(o=e.circle)==null?void 0:o.borderBottomColor:(n=e.circle)==null?void 0:n.borderColor}};
  border-top: ${e=>{var t,o,n,r;return(t=e.circle)!=null&&t.borderTopSize||((o=e.circle)==null?void 0:o.borderTopSize)===0?(n=e.circle)==null?void 0:n.borderTopSize:(r=e.circle)==null?void 0:r.borderSize}}px
    solid
    ${e=>{var t,o,n;return(t=e.circle)!=null&&t.borderTopColor?(o=e.circle)==null?void 0:o.borderTopColor:(n=e.circle)==null?void 0:n.borderColor}};
  max-width: 100%;
  max-height: 100%;
  position: absolute;
  text-align: center;
  transform: translate(
    ${e=>{var t;return(t=e.circle)==null?void 0:t.x}}px,
    ${e=>{var t;return(t=e.circle)==null?void 0:t.y}}px
  );
  ${e=>e.resize?"resize: horizontal; overflow: hidden;":""}
`,jr=({children:e,circle:t})=>{const o=u.useRef(null),n=u.useRef(null),{toggleShapeForm:r,shapeForm:i,setShapeId:a,setShowShapeForm:c,setCircles:h,shapeId:m,showShapeForm:f,updateShape:j}=u.useContext(ze),{layoutBody:w}=u.useContext(ce),[I,d]=u.useState(!1),[M,C]=u.useState(!1),[L,A]=u.useState(t.name),[b,O]=u.useState({x:w.width/2-t.width/2,y:w.width/2}),l=y=>{A(y.target.value)},S=y=>{y.key==="Enter"&&v()},v=async()=>{await dt(t._id,{name:L}),h(y=>y.map(E=>E._id===t._id?{...E,name:L}:E)),C(!1)};u.useEffect(()=>{const y=new ResizeObserver(E=>{for(let g of E){const{width:N,height:T}=g.contentRect;N&&T&&(j(t._id,{width:N,height:T}),h(x=>x.map(F=>F._id===t._id?{...F,width:N,height:T}:F)))}});return o.current&&y.observe(o.current),()=>{o.current&&y.unobserve(o.current)}},[]);const W={width:t.width,height:t.height,backgroundColor:t.backgroundColor,cursor:"grab",color:t.color,justifyContent:t.justifyContent,alignItems:t.alignItems,borderRadius:"50%"},X=async(y,E)=>{try{const g=await dt(y,E);h(N=>N.map(T=>T._id===y?g.shape:T))}catch(g){console.log("error",g)}},G=y=>{o.current&&!o.current.contains(y.target)&&i.current&&!i.current.contains(y.target)&&(c(!1),a(null),v())};u.useEffect(()=>(document.addEventListener("mouseup",G),()=>document.removeEventListener("mouseup",G)),[]),u.useEffect(()=>{const y=E=>{M&&o.current&&!o.current.contains(E.target)&&(v(),C(!1))};return document.addEventListener("mousedown",y),()=>{document.removeEventListener("mousedown",y)}},[M,v]);const Q=y=>{c(!0),a(y)},p=(y,E)=>{const g={x:E.x,y:E.y};O(g),d(!0),h(N=>N.map(T=>T._id===t._id?{...T,x:g.x,y:g.y}:T))},z=w.width,P=w.height,K=t.width,D=t.height,[Y,_]=u.useState({});return u.useEffect(()=>{let y={left:0,top:0,right:z-K,bottom:P-D};if(w.layoutType==="poligon-1")t.y>=P*37/100&&t.y<=P*63/100&&t.x>=z*.79-t.width?y={left:z*.02,top:P*.37,right:z*.98-K,bottom:P*.63-D}:y={left:z*.02,top:P*.02,right:z*.79-K,bottom:P*.98-D},_(y);else if(w.layoutType==="triangle"){const F=z*.5,B=z*.02,k=z*.98,$=P*.02,R=P*.99,H=(R-$)/(B-F),V=(R-$)/(k-F),Z=(t.y-$)/H+F,te=(t.y-$)/V+F;y={left:Z-K/4.5,top:D/1.35,right:te-K/1.25,bottom:P-D},_(y)}else if(w.layoutType==="circle"){let E=function(x){const F=Math.sqrt(g**2-(x-g)**2),B=g-F,k=g+F-K;return{leftLimit:B,rightLimit:k}};const g=z/2;let{leftLimit:N,rightLimit:T}=E(t.y);y={left:N,top:0,right:T,bottom:P-D},_(y)}else if(w.layoutType==="ellipse"){let E=function(F){const B=F-P/2,k=g*Math.sqrt(1-B**2/N**2),$=z/2,R=$-k,H=$+k-K;return{leftLimit:R,rightLimit:H}};const g=z*.48,N=P*.24;let{leftLimit:T,rightLimit:x}=E(t.y);y={left:T,top:g-D,right:x,bottom:P-D},_(y)}else w.layoutType==="poligon-2"&&(t.y+D<=.17*P+D?y={left:.17*z,top:.02*P,right:.83*z-K,bottom:.83*P-D}:t.x>=.2*z&&t.x+K<=.5*z&&t.y+D>=.83*z?y={left:.2*z,top:.02*P,right:.5*z-K,bottom:.98*P-D}:t.x<.18*z?y={left:.02*z,top:.1701*P,right:z-K,bottom:.83*P-D}:t.x+K>=.5*z&&t.x+K<=.83*z?y={left:.02*z,top:0,right:z-K,bottom:.83*P-D}:t.x+K>=.83*z&&(y={left:.02*z,top:.1701*P,right:z-K,bottom:.83*P-D})),_(y)},[t.x,t.y,z,P,K,D,w.layoutType]),s.jsx(We,{bounds:Y,handle:".handle",onDrag:(y,E)=>p(y,E),position:{x:t.x,y:t.y},onStop:()=>{I&&(X(t._id,b),d(!1))},children:s.jsxs(Cr,{ref:o,onClick:()=>Q(t._id),tabIndex:0,onFocus:r,circle:t,className:"circle-shape",resize:f,children:[s.jsx("div",{className:"handle circle-name",style:W,onDoubleClick:()=>{C(!0),setTimeout(()=>{var y;return(y=n.current)==null?void 0:y.focus()},0)},children:M?s.jsx("input",{ref:n,type:"text",value:L,onChange:l,className:"input-name-cirle",onKeyDown:S,style:{width:`${Math.max(1,t.name.length)*10-10}%`,color:t.color,fontSize:t.fontSize}}):s.jsx(s.Fragment,{children:t.name})}),e]})})},Sr=ke.div`
  position: absolute;
  width: ${e=>{var t;return(t=e.square)==null?void 0:t.width}}px;
  /* width: ${e=>e.dinamicWidth}px; */
  

  height: ${e=>{var t;return(t=e.square)==null?void 0:t.height}}px;
  background-color: ${e=>{var t;return(t=e.square)==null?void 0:t.backgroundColor}};
  /* border: ${e=>{var t;return(t=e.square)==null?void 0:t.borderSize}}px solid
    ${e=>{var t;return(t=e.square)==null?void 0:t.borderColor}}; */
  border-left: ${e=>{var t,o,n,r;return(t=e.square)!=null&&t.borderLeftSize||((o=e.square)==null?void 0:o.borderLeftSize)===0?(n=e.square)==null?void 0:n.borderLeftSize:(r=e.square)==null?void 0:r.borderSize}}px
    solid
    ${e=>{var t,o,n;return(t=e.square)!=null&&t.borderLeftColor?(o=e.square)==null?void 0:o.borderLeftColor:(n=e.square)==null?void 0:n.borderColor}};
  border-right: ${e=>{var t,o,n,r;return(t=e.square)!=null&&t.borderRightSize||((o=e.square)==null?void 0:o.borderRightSize)===0?(n=e.square)==null?void 0:n.borderRightSize:(r=e.square)==null?void 0:r.borderSize}}px
    solid
    ${e=>{var t,o,n;return(t=e.square)!=null&&t.borderRightColor?(o=e.square)==null?void 0:o.borderRightColor:(n=e.square)==null?void 0:n.borderColor}};
  border-bottom: ${e=>{var t,o,n,r;return(t=e.square)!=null&&t.borderBottomSize||((o=e.square)==null?void 0:o.borderBottomSize)===0?(n=e.square)==null?void 0:n.borderBottomSize:(r=e.square)==null?void 0:r.borderSize}}px
    solid
    ${e=>{var t,o,n;return(t=e.square)!=null&&t.borderBottomColor?(o=e.square)==null?void 0:o.borderBottomColor:(n=e.square)==null?void 0:n.borderColor}};
  border-top: ${e=>{var t,o,n,r;return(t=e.square)!=null&&t.borderTopSize||((o=e.square)==null?void 0:o.borderTopSize)===0?(n=e.square)==null?void 0:n.borderTopSize:(r=e.square)==null?void 0:r.borderSize}}px
    solid
    ${e=>{var t,o,n;return(t=e.square)!=null&&t.borderTopColor?(o=e.square)==null?void 0:o.borderTopColor:(n=e.square)==null?void 0:n.borderColor}};
  /* max-width: 100%; */
  /* max-height: 100%; */
  text-align: center;
  ${e=>e.resize?"resize:both; overflow: hidden;":""}
  transform: translate(
    ${e=>{var t;return(t=e.square)==null?void 0:t.x}}px,
    ${e=>{var t;return(t=e.square)==null?void 0:t.y}}px
  );
  top: 0%;
  left: 0%;

`,Nr=({children:e,square:t})=>{const o=u.useRef(null),n=u.useRef(null),{layoutBody:r,floorplan:i,layoutDetails:a,layoutRef:c}=u.useContext(ce),{shapeForm:h,setShapeId:m,showShapeForm:f,shapeId:j,setShowShapeForm:w,setSquares:I,updateShape:d}=u.useContext(ze),[M,C]=u.useState(!1),[L,A]=u.useState(!1),[b,O]=u.useState(t.name),[l,S]=u.useState({x:r.width/2-t.width/2,y:r.width/2}),v=D=>{O(D.target.value)},W=async()=>{await dt(t._id,{name:b}),I(D=>D.map(Y=>Y._id===t._id?{...Y,name:b}:Y)),A(!1)};u.useEffect(()=>{const D=Y=>{L&&o.current&&!o.current.contains(Y.target)&&(W(),A(!1))};return document.addEventListener("mousedown",D),()=>{document.removeEventListener("mousedown",D)}},[L,W]),u.useEffect(()=>{const D=new ResizeObserver(Y=>{for(let _ of Y){const{height:y}=_.contentRect,E=_.contentRect.width;E&&y&&(d(t._id,{width:E,height:y}),I(g=>g.map(N=>N._id===t._id?{...N,width:E,height:y}:N)))}});return o.current&&D.observe(o.current),()=>{o.current&&D.unobserve(o.current)}},[]);const X={width:"100%",height:"80%",backgroundColor:t.backgroundColor,cursor:"grab",color:t.color,justifyContent:t.justifyContent,alignItems:t.alignItems,fontSize:`${t.fontSize}px`},G=D=>{o.current&&!o.current.contains(D.target)&&h.current&&!h.current.contains(D.target)&&(w(!1),m(null))},Q=D=>{w(!0),m(D)};u.useEffect(()=>(document.addEventListener("mouseup",G),()=>document.removeEventListener("mouseup",G)),[]);const p=D=>{D.key==="Enter"&&W()},z=async(D,Y)=>{try{const _=await dt(D,Y);I(y=>y.map(E=>E._id===D?_.shape:E))}catch(_){console.log("error",_)}},P=(D,Y)=>{const _={x:Y.x,y:Y.y};C(!0),S(_),I(y=>y.map(E=>E._id===t._id?{...E,x:_.x,y:_.y}:E))},K=(a==null?void 0:a.containerScale)*(t==null?void 0:t.width);return s.jsx(We,{bounds:c,handle:".handle",onDrag:(D,Y)=>{P(D,Y)},position:{x:t.x,y:t.y},onStop:(D,Y)=>{M&&(z(t._id,l),C(!1))},scale:a==null?void 0:a.displayScale,children:s.jsxs(Sr,{ref:o,tabIndex:1,onClick:()=>{Q(t._id)},square:t,className:"square-shape",resize:f,dinamicWidth:K,children:[s.jsx("div",{className:"handle circle-name",style:X,onDoubleClick:()=>{A(!0),setTimeout(()=>{var D;return(D=n.current)==null?void 0:D.focus()},0)},children:L?s.jsx("input",{ref:n,type:"text",value:b,onChange:v,className:"input-name-cirle",onKeyDown:p,style:{width:`${Math.max(1,t.name.length)*10}%`,color:t.color,fontSize:t.fontSize}}):s.jsx(s.Fragment,{children:t.name})}),e]})})},kr=()=>{const{circles:e,squares:t,shapeDeleted:o,setShapeDeleted:n,setShapeEdited:r,shapeEdited:i,fetchShapes:a,shapeAdded:c,setShapeAdded:h}=u.useContext(ze);u.useContext(ce);const m=de();return u.useEffect(()=>{o&&n(null),i&&r(!1),c&&h(!1),a(m.layoutIdParam)},[m.layoutIdParam,o,i,c]),s.jsxs("div",{className:"display-shapes-container",style:{},children:[e&&e.map(f=>s.jsx(jr,{circle:f},f._id)),t&&t.map(f=>s.jsx(Nr,{square:f},f._id))]})},Tr=()=>{const{setCircles:e,setSquares:t,showShapeForm:o,shapeForm:n,shapeId:r,setShapeId:i,toggleShapeForm:a,squares:c,circles:h,updateShape:m}=u.useContext(ze);u.useContext(he);const[f,j]=u.useState(null),[w,I]=u.useState("border"),d=[...h,...c].find(S=>S._id===r),M=(d==null?void 0:d.shapeType.toLowerCase())==="circle",C=S=>{j(v=>v===S?null:S)},L=S=>{I(S.target.value)},A=async S=>{try{const v=await mo(S);console.log("Shape Deleted:",v),e(W=>W.filter(X=>X._id!==S)),t(W=>W.filter(X=>X._id!==S)),i(null),a()}catch(v){console.log("error:",v)}},b=S=>{const{name:v,value:W}=S.target,X=p=>p.toLowerCase()==="circle"?e:t;let G={...d,[v]:W};if(v==="borderSize"||v==="borderColor"){const p=["Left","Right","Bottom","Top"].reduce((z,P)=>(z[`border${P}Size`]=v==="borderSize"?W:d[`border${P}Size`],z[`border${P}Color`]=v==="borderColor"?W:d[`border${P}Color`],z),{});G={...G,...p}}X(d.shapeType)(p=>p.map(z=>z._id===r?G:z)),["height","width"].includes(v)||m(r,G)},O=document.querySelector(".display-shapes-container");O&&O.offsetWidth;const l=(S,v)=>{let W={...d,[S]:v};d.shapeType.toLowerCase()==="circle"?e(X=>X.map(G=>G._id===r?W:G)):d.shapeType.toLowerCase()==="square"&&t(X=>X.map(G=>G._id===r?W:G)),m(r,W)};return u.useEffect(()=>{if((d==null?void 0:d.shapeType.toLowerCase())==="circle"){let S=document.getElementsByClassName("circle-shape");for(let v=0;v<h.length;v++)S[v].style.removeProperty("height"),S[v].style.removeProperty("width")}else if((d==null?void 0:d.shapeType.toLowerCase())==="square"){let S=document.getElementsByClassName("square-shape");for(let v=0;v<c.length;v++)S[v].style.removeProperty("height"),S[v].style.removeProperty("width")}},[d]),s.jsx(s.Fragment,{children:o&&s.jsxs("div",{className:"shape-form-container",ref:n,children:[s.jsxs("div",{children:[s.jsx("h1",{className:"form-title",children:"Shape Tools"}),s.jsxs("div",{className:"shape-form-fields-container",children:[s.jsxs("div",{className:"field-one",children:[s.jsxs("div",{className:"dropdown-container",onClick:()=>C(1),children:[s.jsx("h1",{className:"text-input-title",children:"Size & Color"}),s.jsx("div",{className:f===1?"down-arrow":"up-arrow"})]}),s.jsxs("div",{className:f===1?"show-dropdown":"hide-dropdown",children:[s.jsx("div",{className:"shape-label-input-container",children:!M&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"shape-label-input",children:[s.jsx("label",{htmlFor:"height",children:"Heigth"}),s.jsx("input",{type:"number",name:"height",onChange:b,value:d==null?void 0:d.height})]}),s.jsx("input",{type:"range",className:"range",name:"height",onChange:b,value:d==null?void 0:d.height,min:10,max:500})]})}),s.jsxs("div",{className:"shape-label-input-container",children:[s.jsxs("div",{className:"shape-label-input",children:[s.jsx("label",{htmlFor:"width",children:M?"Size":"Width"}),s.jsx("input",{type:"number",name:"width",onChange:b,value:d==null?void 0:d.width})]}),s.jsx("input",{type:"range",className:"range",name:"width",onChange:b,value:d==null?void 0:d.width,min:10,max:1e3})]}),s.jsxs("div",{className:"shape-label-input-container",children:[s.jsxs("div",{className:"shape-label-input",children:[s.jsx("label",{htmlFor:"maxWidth",children:M?"Size":"Max-Width"}),s.jsx("h1",{className:"maxWidth-percentage",children:"%"}),s.jsx("input",{type:"number",name:"maxWidth",onChange:b,value:d==null?void 0:d.maxWidth})]}),s.jsx("input",{type:"range",className:"range",name:"maxWidth",onChange:b,value:d==null?void 0:d.maxWidth,min:5,max:100})]}),s.jsxs("div",{className:"shape-label-input-container",children:[s.jsxs("div",{className:"shape-label-input",children:[s.jsx("label",{htmlFor:"x",children:"X-Axis"}),s.jsx("input",{type:"number",name:"x",onChange:b,value:d==null?void 0:d.x})]}),s.jsx("input",{type:"range",className:"range",name:"x",onChange:b,value:d==null?void 0:d.x,min:10,max:1e3})]}),s.jsxs("div",{className:"shape-label-input-container",children:[s.jsxs("div",{className:"shape-label-input",children:[s.jsx("label",{htmlFor:"y",children:"Y-Axis"}),s.jsx("input",{type:"number",name:"y",onChange:b,value:d==null?void 0:d.y})]}),s.jsx("input",{type:"range",className:"range",name:"y",onChange:b,value:d==null?void 0:d.y,min:10,max:1e3})]}),s.jsx("div",{children:s.jsx("input",{type:"color",name:"backgroundColor",className:"shape-background-color",onChange:b,value:d==null?void 0:d.backgroundColor})})]})]}),s.jsxs("div",{className:"field-one",children:[s.jsxs("div",{className:"dropdown-container",onClick:()=>C(2),children:[s.jsx("h1",{className:"text-input-title",children:"Text"}),s.jsx("div",{className:f===2?"down-arrow":"up-arrow"})]}),s.jsxs("div",{className:f===2?"":"hide-dropdown",children:[s.jsx("div",{className:"shape-label-name",children:s.jsx("input",{type:"text",name:"name",onChange:b,value:d==null?void 0:d.name,className:"input-name-name",style:{width:`${Math.max(1,d==null?void 0:d.name.length)*10-10}px`,color:d==null?void 0:d.color}})}),s.jsxs("div",{className:"shape-label-input",children:[s.jsxs("div",{className:"text-color-input-container",children:[s.jsx("p",{id:"paragraphColorOpener",children:"A"}),s.jsx("input",{type:"color",name:"color",onChange:b,value:d==null?void 0:d.color,id:"colorInput"})]}),s.jsx("input",{id:"fontsize-shapetools",type:"number",name:"fontSize",onChange:b,value:d==null?void 0:d.fontSize})]}),s.jsx("p",{className:"align-text",children:"Align Text"}),s.jsxs("div",{className:"justify-content-input",children:[s.jsx("button",{type:"button",className:"justify-left",name:"justifyContent",onClick:()=>l("alignItems","flex-start")}),s.jsx("button",{type:"button",className:"justify-center",name:"justifyContent",onClick:()=>l("alignItems","center")}),s.jsx("button",{type:"button",className:"justify-right",name:"justifyContent",onClick:()=>l("alignItems","flex-end")})]}),s.jsxs("div",{className:"justify-content-input",children:[s.jsx("button",{type:"button",className:"align-left",name:"alignItems",onClick:()=>l("justifyContent","flex-start")}),s.jsx("button",{type:"button",className:"align-center",name:"alignItems",onClick:()=>l("justifyContent","center")}),s.jsx("button",{type:"button",className:"align-right",name:"alignItems",onClick:()=>l("justifyContent","flex-end")})]})]})]}),s.jsxs("div",{className:"field-one",children:[s.jsxs("div",{className:"dropdown-container",onClick:()=>C(3),children:[s.jsx("h1",{className:"text-input-title",children:"Border"}),s.jsx("div",{className:f===3?"down-arrow":"up-arrow"})]}),s.jsxs("div",{className:f===3?"show-input":"hide-dropdown",children:[s.jsxs("select",{onChange:L,value:w,className:"select-border",children:[s.jsx("option",{value:"border",children:"All"}),s.jsx("option",{value:"borderRight",children:"Right"}),s.jsx("option",{value:"borderLeft",children:"Left"}),s.jsx("option",{value:"borderTop",children:"Top"}),s.jsx("option",{value:"borderBottom",children:"Bottom"})]}),s.jsx("div",{className:"shape-label-input-container border-range",children:s.jsxs("div",{className:" special-input-size",children:[s.jsx("input",{type:"number",name:`${w}Size`,onChange:b,value:d==null?void 0:d[`${w}Size`],className:"size-border-input"}),s.jsx("input",{type:"range",className:"range",name:`${w}Size`,onChange:b,value:d==null?void 0:d[`${w}Size`],min:0,max:20})]})}),s.jsx("div",{className:"",children:s.jsx("input",{type:"color",name:`${w}Color`,onChange:b,value:d==null?void 0:d[`${w}Color`],className:"border-color"})})]})]})]})]}),s.jsx("div",{className:"delete-shape-form",children:s.jsx("button",{onClick:()=>A(r),className:"delete-shape-form-button",children:"Delete"})})]})})},_r=()=>{const{addBlockCircle:e,addBlockSquare:t}=u.useContext(he),{layoutBody:o}=u.useContext(ce),n=de(),[r,i]=u.useState({blockType:"",status:"",capacity:0,maxSection:0,width:100,height:100,borderSize:1,borderLeftSize:0,borderLeftColor:"",borderRightSize:0,borderRightColor:"",borderBottomSize:0,borderBottomColor:"",borderTopSize:0,borderTopColor:"",borderColor:"black",backgroundColor:"white",color:"white",justifyContent:"",alignItems:"",x:(o==null?void 0:o.width)/2-50,y:(o==null?void 0:o.height)/2-50,fontSize:15,isMatched:!1});return s.jsxs("div",{className:"add-block-container",children:[s.jsx("h1",{className:"add-block-title",children:"Add Blocks"}),s.jsxs("div",{className:"add-block-shapes",children:[s.jsx("div",{className:"add-block-circle",onClick:()=>e(n.layoutIdParam,r)}),s.jsxs("div",{className:"add-block-square",onClick:()=>t(n.layoutIdParam,r),children:[s.jsx("div",{className:"add-block-small-circle",children:"1"}),s.jsx("div",{className:"add-block-small-circle",children:"2"}),s.jsx("div",{className:"add-block-small-circle",children:"3"}),s.jsx("div",{className:"add-block-small-circle",children:"4"})]})]})]})},Er=ke.div`
  position: absolute;
  width: ${e=>{var t;return(t=e.bSquare)==null?void 0:t.width}}px;
  height: ${e=>{var t;return(t=e.bSquare)==null?void 0:t.height}}px;
  background-color: ${e=>{var t;return(t=e.bSquare)==null?void 0:t.backgroundColor}};
  border-left: ${e=>{var t,o,n,r;return(t=e.bSquare)!=null&&t.borderLeftSize||((o=e.bSquare)==null?void 0:o.borderLeftSize)===0?(n=e.bSquare)==null?void 0:n.borderLeftSize:(r=e.bSquare)==null?void 0:r.borderSize}}px
    solid
    ${e=>{var t,o,n;return(t=e.bSquare)!=null&&t.borderLeftColor?(o=e.bSquare)==null?void 0:o.borderLeftColor:(n=e.bSquare)==null?void 0:n.borderColor}};
  border-right: ${e=>{var t,o,n,r;return(t=e.bSquare)!=null&&t.borderRightSize||((o=e.bSquare)==null?void 0:o.borderRightSize)===0?(n=e.bSquare)==null?void 0:n.borderRightSize:(r=e.bSquare)==null?void 0:r.borderSize}}px
    solid
    ${e=>{var t,o,n;return(t=e.bSquare)!=null&&t.borderRightColor?(o=e.bSquare)==null?void 0:o.borderRightColor:(n=e.bSquare)==null?void 0:n.borderColor}};
  border-bottom: ${e=>{var t,o,n,r;return(t=e.bSquare)!=null&&t.borderBottomSize||((o=e.bSquare)==null?void 0:o.borderBottomSize)===0?(n=e.bSquare)==null?void 0:n.borderBottomSize:(r=e.bSquare)==null?void 0:r.borderSize}}px
    solid
    ${e=>{var t,o,n;return(t=e.bSquare)!=null&&t.borderBottomColor?(o=e.bSquare)==null?void 0:o.borderBottomColor:(n=e.bSquare)==null?void 0:n.borderColor}};
  border-top: ${e=>{var t,o,n,r;return(t=e.bSquare)!=null&&t.borderTopSize||((o=e.bSquare)==null?void 0:o.borderTopSize)===0?(n=e.bSquare)==null?void 0:n.borderTopSize:(r=e.bSquare)==null?void 0:r.borderSize}}px
    solid
    ${e=>{var t,o,n;return(t=e.bSquare)!=null&&t.borderTopColor?(o=e.bSquare)==null?void 0:o.borderTopColor:(n=e.bSquare)==null?void 0:n.borderColor}};
  /* max-width: 100%; */
  /* max-height: 100%; */
  text-align: center;
  ${e=>e.resize?"resize:both; overflow: hidden;":""};
  /* transform: translate(
  ${e=>{var t;return(t=e.bSquare)==null?void 0:t.x}}px,
  ${e=>{var t;return(t=e.bSquare)==null?void 0:t.y}}px
); */
`,Xn=()=>{const{lockGrid:e,setLockGrid:t}=u.useContext(ve),o=()=>{t(n=>!n),console.log("lockGrid:",e)};return s.jsxs("label",{className:"grid-lock",children:[s.jsx("input",{type:"checkbox"}),s.jsx("svg",{viewBox:"0 0 576 512",height:"1em",xmlns:"http://www.w3.org/2000/svg",className:"lock-open",children:s.jsx("path",{d:"M352 144c0-44.2 35.8-80 80-80s80 35.8 80 80v48c0 17.7 14.3 32 32 32s32-14.3 32-32V144C576 64.5 511.5 0 432 0S288 64.5 288 144v48H64c-35.3 0-64 28.7-64 64V448c0 35.3 28.7 64 64 64H384c35.3 0 64-28.7 64-64V256c0-35.3-28.7-64-64-64H352V144z",onClick:o})}),s.jsx("svg",{viewBox:"0 0 448 512",height:"1em",xmlns:"http://www.w3.org/2000/svg",className:"lock",children:s.jsx("path",{d:"M144 144v48H304V144c0-44.2-35.8-80-80-80s-80 35.8-80 80zM80 192V144C80 64.5 144.5 0 224 0s144 64.5 144 144v48h16c35.3 0 64 28.7 64 64V448c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V256c0-35.3 28.7-64 64-64H80z",onClick:o})})]})},Ir=({children:e,bSquare:t})=>{const o=Ne(),n=de(),r=u.useRef(null),i=u.useRef(null),{setBSquares:a,updateBShape:c,setShowBShapeForm:h,blockId:m,setBlockId:f,bShapeForm:j,setCurrentBlock:w,bSquareRef:I,bCircleRef:d,showBShapeForm:M,blockDeleted:C,setBlockDeleted:L}=u.useContext(he),{showTShapeForm:A}=u.useContext(ve),{layoutBody:b,layoutDetails:O}=u.useContext(ce),[l,S]=u.useState(!1),[v,W]=u.useState(!1),[X,G]=u.useState(t==null?void 0:t.name),[Q,p]=u.useState({x:b.width/2-(t==null?void 0:t.width)/2,y:b.height/2}),z=k=>{G(k.target.value)},P=async()=>{await Ue(t._id,{name:X}),a(k=>k.map($=>$._id===t._id?{...$,name:X}:$)),W(!1)},K=k=>{k.key==="Enter"&&P()};u.useEffect(()=>{const k=new ResizeObserver($=>{for(let R of $){const{width:H}=R.contentRect,{height:V}=R.contentRect;H&&V&&(c(t._id,{width:H,height:V}),a(Z=>Z.map(te=>te._id===t._id?{...te,width:H,height:V}:te)))}});return r.current&&k.observe(r.current),()=>{r.current&&k.unobserve(r.current)}},[]);const D={width:"100%",height:"80%",backgroundColor:t==null?void 0:t.backgroundColor,cursor:"grab",color:t==null?void 0:t.color,justifyContent:t==null?void 0:t.justifyContent,alignItems:t==null?void 0:t.alignItems,fontSize:`${t==null?void 0:t.fontSize}px`},Y=async(k,$)=>{try{const R=await Ue(k,$);a(H=>H.map(V=>V._id===k?R.block:V))}catch(R){console.log("error",R)}};u.useEffect(()=>{const k=$=>{const R=$.target.closest(".block-square-shape"),H=$.target.closest(".block-circle-shape");!$.target.closest(".hierarchy-blocks-price")&&!R&&!H&&j.current&&!j.current.contains($.target)&&(o(`/admin/designpage/${n.layoutIdParam}`),h(!1),f(null),w(null),P())};return document.addEventListener("mousedown",k),()=>{document.removeEventListener("mousedown",k)}},[I,j,d]);const _=k=>{h(!0),f(k)},y=(k,$)=>{o(`/admin/designpage/${k}/${$}`)},E=(k,$)=>{const R={x:$.x,y:$.y};S(!0),p(R),a(H=>H.map(V=>V._id===t._id?{...V,x:R.x,y:R.y}:V))},g=b.width,N=b.height,T=t==null?void 0:t.width,x=t==null?void 0:t.height,[F,B]=u.useState({});return u.useEffect(()=>{let k={left:0,top:0,right:g-T,bottom:N-x};if(b.layoutType==="poligon-1")(t==null?void 0:t.y)>=N*37/100&&(t==null?void 0:t.y)<=N*63/100&&(t==null?void 0:t.x)>=g*.79-t.width?k={left:g*.02,top:N*.37,right:g*.98-T,bottom:N*.63-x}:k={left:g*.02,top:N*.02,right:g*.79-T,bottom:N*.98-x},B(k);else if(b.layoutType==="triangle"){const te=g*.5,ae=g*.02,be=g*.98,xe=N*.02,Le=N*.99,He=(Le-xe)/(ae-te),uo=(Le-xe)/(be-te),ho=(t.y-xe)/He+te,fo=(t.y-xe)/uo+te;k={left:ho,top:x,right:fo-T,bottom:N-x},B(k)}else if(b.layoutType==="circle"){let $=function(Z){const te=Math.sqrt(R**2-(Z-R)**2),ae=R-te,be=R+te-T;return{leftLimit:ae,rightLimit:be}};const R=g/2;let{leftLimit:H,rightLimit:V}=$(square.y);console.log("layoutWidht:",g),console.log("layoutHeight:",N),console.log("radius:",R),k={left:H,top:0,right:V,bottom:N-x},B(k)}else if(b.layoutType==="ellipse"){let $=function(te){const ae=te-N/2,be=R*Math.sqrt(1-ae**2/H**2),xe=g/2,Le=xe-be,He=xe+be-T;return{leftLimit:Le,rightLimit:He}};const R=g*.48,H=N*.24;let{leftLimit:V,rightLimit:Z}=$(t.y);k={left:V,top:R-x,right:Z,bottom:N-x},B(k)}else b.layoutType==="poligon-2"&&(console.log("squareY:",t.y+x),console.log("condition-2",.83*g),t.y+x<=.17*N+x?(k={left:.17*g,top:.02*N,right:.83*g-T,bottom:.83*N-x},console.log("condition - 1 checked")):t.x>=.2*g&&t.x+T<=.5*g&&t.y+x>=.83*g?(k={left:.2*g,top:.02*N,right:.5*g-T,bottom:.98*N-x},console.log("condition - 2 checked")):t.x<.18*g?k={left:.02*g,top:.1701*N,right:g-T,bottom:.83*N-x}:t.x+T>=.5*g&&t.x+T<=.83*g?k={left:.02*g,top:0,right:g-T,bottom:.83*N-x}:t.x+T>=.83*g&&(k={left:.02*g,top:.1701*N,right:g-T,bottom:.83*N-x})),B(k)},[t==null?void 0:t.x,t==null?void 0:t.y,g,N,T,x,b.layoutType]),s.jsx(We,{bounds:F,handle:".handle",onDrag:(k,$)=>{E(k,$)},position:{x:t==null?void 0:t.x,y:t==null?void 0:t.y},onStop:(k,$)=>{l&&(Y(t._id,Q),S(!1))},grid:[5,5],children:s.jsxs(Er,{ref:r,tabIndex:1,onClick:()=>{_(t._id),y(n.layoutIdParam,t._id)},bSquare:t,className:m===t._id&&M&&!A?"square-shape block-square-shape focus-block":"square-shape block-square-shape",resize:m===t._id,children:[s.jsx("div",{className:"handle circle-name blocks",style:D,onDoubleClick:()=>{W(!0),setTimeout(()=>{var k;return(k=i.current)==null?void 0:k.focus()},0)},children:v?s.jsx("input",{ref:i,type:"text",value:X,onChange:z,className:"input-name-cirle",onKeyDown:K,style:{width:`${Math.max(1,t.name.length)*10}%`,color:t.color,fontSize:t.fontSize}}):s.jsx(s.Fragment,{children:t==null?void 0:t.name})}),s.jsx(Xn,{}),e]})})},zr=ke.div`
  width: ${e=>{var t;return(t=e.bCircle)==null?void 0:t.width}}px;
  height: ${e=>{var t;return(t=e.bCircle)==null?void 0:t.width}}px;
  border-radius: ${e=>{var t;return((t=e.bCircle)==null?void 0:t.borderRadius)||100}}%;
  background-color: ${e=>{var t;return(t=e.bCircle)==null?void 0:t.backgroundColor}};
  border-left: ${e=>{var t,o,n,r;return(t=e.bCircle)!=null&&t.borderLeftSize||((o=e.bCircle)==null?void 0:o.borderLeftSize)===0?(n=e.bCircle)==null?void 0:n.borderLeftSize:(r=e.bCircle)==null?void 0:r.borderSize}}px
    solid
    ${e=>{var t,o,n;return(t=e.bCircle)!=null&&t.borderLeftColor?(o=e.bCircle)==null?void 0:o.borderLeftColor:(n=e.bCircle)==null?void 0:n.borderColor}};
  border-right: ${e=>{var t,o,n,r;return(t=e.bCircle)!=null&&t.borderRightSize||((o=e.bCircle)==null?void 0:o.borderRightSize)===0?(n=e.bCircle)==null?void 0:n.borderRightSize:(r=e.bCircle)==null?void 0:r.borderSize}}px
    solid
    ${e=>{var t,o,n;return(t=e.bCircle)!=null&&t.borderRightColor?(o=e.bCircle)==null?void 0:o.borderRightColor:(n=e.bCircle)==null?void 0:n.borderColor}};
  border-bottom: ${e=>{var t,o,n,r;return(t=e.bCircle)!=null&&t.borderBottomSize||((o=e.bCircle)==null?void 0:o.borderBottomSize)===0?(n=e.bCircle)==null?void 0:n.borderBottomSize:(r=e.bCircle)==null?void 0:r.borderSize}}px
    solid
    ${e=>{var t,o,n;return(t=e.bCircle)!=null&&t.borderBottomColor?(o=e.bCircle)==null?void 0:o.borderBottomColor:(n=e.bCircle)==null?void 0:n.borderColor}};
  border-top: ${e=>{var t,o,n,r;return(t=e.bCircle)!=null&&t.borderTopSize||((o=e.bCircle)==null?void 0:o.borderTopSize)===0?(n=e.bCircle)==null?void 0:n.borderTopSize:(r=e.bCircle)==null?void 0:r.borderSize}}px
    solid
    ${e=>{var t,o,n;return(t=e.bCircle)!=null&&t.borderTopColor?(o=e.bCircle)==null?void 0:o.borderTopColor:(n=e.bCircle)==null?void 0:n.borderColor}};
  max-width: 100%;
  max-height: 100%;
  position: absolute;
  text-align: center;
  transform: translate(
    ${e=>{var t;return(t=e.bCircle)==null?void 0:t.x}}px,
    ${e=>{var t;return(t=e.bCircle)==null?void 0:t.y}}px
  );
  ${e=>e.resize?"resize: horizontal; overflow: hidden;":""}
`,$r=({children:e,bCircle:t})=>{const o=Ne(),n=de(),r=u.useRef(null),{setBCircles:i,updateBShape:a,setShowBShapeForm:c,showBShapeForm:h,blockId:m,setBlockId:f,bShapeForm:j,currentBlock:w,setCurrentBlock:I,bCircleRef:d,bSquareRef:M}=u.useContext(he),{layoutBody:C,layoutDetails:L}=u.useContext(ce),[A,b]=u.useState(!1),[O,l]=u.useState(!1),[S,v]=u.useState(t.name),[W,X]=u.useState({x:C.width/2-t.width/2,y:C.width/2}),G=x=>{v(x.target.value)},Q=async()=>{await Ue(t._id,{name:S}),i(x=>x.map(F=>F._id===t._id?{...F,name:S}:F)),l(!1)},p=x=>{x.key==="Enter"&&Q()};u.useEffect(()=>{const x=new ResizeObserver(F=>{for(let B of F){const{width:k,height:$}=B.contentRect;k&&$&&(a(t._id,{width:k,height:$}),i(R=>R.map(H=>H._id===t._id?{...H,width:k,height:$}:H)))}});return d.current&&x.observe(d.current),()=>{d.current&&x.unobserve(d.current)}},[]);const z={width:t.width,height:t.height,backgroundColor:t.backgroundColor,cursor:"grab",color:t.color,justifyContent:t.justifyContent,alignItems:t.alignItems,borderRadius:"50%"},P=async(x,F)=>{try{const B=await Ue(x,F);i(k=>k.map($=>$._id===x?B.block:$))}catch(B){console.log("error",B)}};u.useEffect(()=>{const x=F=>{const B=F.target.closest(".block-circle-shape "),k=F.target.closest(".block-square-shape ");!B&&!k&&j.current&&!j.current.contains(F.target)&&(c(!1),f(null),I(null),Q(),o(`/admin/designpage/${L._id}`))};return document.addEventListener("mousedown",x),()=>{document.removeEventListener("mousedown",x)}},[d,j,M]);const K=x=>{c(!0),f(x)},D=(x,F)=>{o(`/admin/designpage/${x}/${F}`)},Y=(x,F)=>{const B={x:F.x,y:F.y};X(B),b(!0),i(k=>k.map($=>$._id===t._id?{...$,x:B.x,y:B.y}:$))},_=C.width,y=C.height,E=t.width,g=t.height,[N,T]=u.useState({});return u.useEffect(()=>{let x={left:0,top:0,right:_-E,bottom:y-g};if(C.layoutType==="poligon-1")t.y>=y*37/100&&t.y<=y*63/100&&t.x>=_*.79-t.width?x={left:_*.02,top:y*.37,right:_*.98-E,bottom:y*.63-g}:x={left:_*.02,top:y*.02,right:_*.79-E,bottom:y*.98-g},T(x);else if(C.layoutType==="triangle"){const H=_*.5,V=_*.02,Z=_*.98,te=y*.02,ae=y*.99,be=(ae-te)/(V-H),xe=(ae-te)/(Z-H),Le=(t.y-te)/be+H,He=(t.y-te)/xe+H;x={left:Le-E/4.5,top:g/1.35,right:He-E/1.25,bottom:y-g},T(x)}else if(C.layoutType==="circle"){let F=function(R){const H=Math.sqrt(B**2-(R-B)**2),V=B-H,Z=B+H-E;return{leftLimit:V,rightLimit:Z}};const B=_/2;let{leftLimit:k,rightLimit:$}=F(t.y);x={left:k,top:0,right:$,bottom:y-g},T(x)}else if(C.layoutType==="ellipse"){let F=function(H){const V=H-y/2,Z=B*Math.sqrt(1-V**2/k**2),te=_/2,ae=te-Z,be=te+Z-E;return{leftLimit:ae,rightLimit:be}};const B=_*.48,k=y*.24;let{leftLimit:$,rightLimit:R}=F(t.y);x={left:$,top:B-g,right:R,bottom:y-g},T(x)}else C.layoutType==="poligon-2"&&(t.y+g<=.17*y+g?x={left:.17*_,top:.02*y,right:.83*_-E,bottom:.83*y-g}:t.x>=.2*_&&t.x+E<=.5*_&&t.y+g>=.83*_?x={left:.2*_,top:.02*y,right:.5*_-E,bottom:.98*y-g}:t.x<.18*_?x={left:.02*_,top:.1701*y,right:_-E,bottom:.83*y-g}:t.x+E>=.5*_&&t.x+E<=.83*_?x={left:.02*_,top:0,right:_-E,bottom:.83*y-g}:t.x+E>=.83*_&&(x={left:.02*_,top:.1701*y,right:_-E,bottom:.83*y-g})),T(x)},[t.x,t.y,_,y,E,g,C.layoutType]),s.jsx(We,{bounds:N,handle:".handle",onDrag:(x,F)=>Y(x,F),position:{x:t.x,y:t.y},onStop:()=>{A&&(P(t._id,W),b(!1))},children:s.jsxs(zr,{ref:d,onClick:()=>{K(t._id),D(n.layoutIdParam,t._id)},tabIndex:0,bCircle:t,className:"circle-shape block-circle-shape",resize:m===t._id,children:[s.jsx("div",{className:"handle circle-name",style:z,onDoubleClick:()=>{l(!0),setTimeout(()=>{var x;return(x=r.current)==null?void 0:x.focus()},0)},children:O?s.jsx("input",{ref:r,type:"text",value:S,onChange:G,className:"input-name-cirle",onKeyDown:p,style:{width:`${Math.max(1,t.name.length)*10-10}%`,color:t.color,fontSize:t.fontSize}}):s.jsx(s.Fragment,{children:t.name})}),s.jsx(Xn,{}),e]})})},un=({block:e})=>{const{currentBlock:t,bCircles:o,bSquares:n,getThisBlock:r,setBSquares:i,setBCircles:a,blockId:c}=u.useContext(he),{addTableCircleManual:h,addTableSquareManual:m,tSquares:f,lockGrid:j,setTShapeAdded:w,tCircles:I,tShapeAdded:d,setTSquares:M}=u.useContext(ve),C=document.querySelector(".display-tables-container"),[L,A]=u.useState({}),[b,O]=u.useState({row:0,col:0}),l=(C==null?void 0:C.offsetWidth)*.95/(t==null?void 0:t.maxCol),S=(C==null?void 0:C.offsetHeight)*.95/(t==null?void 0:t.maxRow),v=b.row<1?0:1,W=b.col<1?0:1,X=b.col>1?l*.065:0,G=b.row>1?l*.065:0;u.useEffect(()=>{A({tableType:"",x:(l+X)*(b.col-v),y:(S+G)*(b.row-W),width:l,height:S,status:"Available",tprice:0,tickets:0,isIncluded:!0,row:b.row,col:b.col,number:0})},[C==null?void 0:C.offsetWidth,C==null?void 0:C.offsetHeight,t,b.row,b.col]);const Q=(P,K)=>{O({row:P,col:K})},p=async(P,K)=>{if((t==null?void 0:t.blockTableType.toLowerCase())==="circle")try{await h(e._id,{...L,row:P,col:K}),w(!0),r(e._id)}catch{}if((t==null?void 0:t.blockTableType.toLowerCase())==="square")try{await m(e._id,{...L,row:P,col:K}),w(!0),r(e._id)}catch{}},z=()=>{let P=[];for(let K=1;K<=(t==null?void 0:t.maxRow);K++)for(let D=1;D<=(t==null?void 0:t.maxCol);D++)P.push(s.jsx("div",{className:(t==null?void 0:t._id)===e._id&&!j?"grid-item":"hide",style:{backgroundColor:`${e==null?void 0:e.backgroundColor}`},onClick:()=>p(K,D),onMouseEnter:()=>Q(K,D),children:"Add"},`${K}-${D}`));return P};return s.jsx(s.Fragment,{children:z()})},Lr=({children:e})=>{const{bSquares:t,bCircles:o,setBShapeAdded:n,bShapeAdded:r,fetchBlocks:i,currentBlock:a,getThisBlock:c}=u.useContext(he);u.useContext(ve);const h=de();u.useEffect(()=>{r&&n(!1),h.layoutIdParam&&i(h.layoutIdParam)},[h.layoutIdParam,r]);const m=f=>u.Children.map(e,j=>Ce.isValidElement(j)?Ce.cloneElement(j,{key:f,blockId:f}):j);return s.jsxs("div",{className:"display-blocks-container",children:[o&&o.map(f=>s.jsxs($r,{bCircle:f,children:[s.jsx("div",{className:(a==null?void 0:a._id)===f._id?"table-grid-circle":"",style:{gridTemplateColumns:`repeat(${a==null?void 0:a.maxCol}, 1fr)`,gridTemplateRows:`repeat(${a==null?void 0:a.maxRow}, 1fr)`},children:s.jsx(un,{block:f})}),m(f._id)]},f._id)),t&&t.map(f=>s.jsxs(Ir,{bSquare:f,children:[s.jsx("div",{className:(a==null?void 0:a._id)===f._id?"table-grid":"",style:{gridTemplateColumns:`repeat(${a==null?void 0:a.maxCol}, 1fr)`,gridTemplateRows:`repeat(${a==null?void 0:a.maxRow}, 1fr)`},children:s.jsx(un,{block:f})}),m(f._id)]},f._id))]})},Rr=({children:e})=>{var y,E;const{bCircles:t,bSquares:o,setBCircles:n,setBSquares:r,bShapeForm:i,blockId:a,setBlockId:c,showBShapeForm:h,toggleBShapeForm:m,updateBShape:f,priceUpdated:j,setPriceUpdated:w,layoutObject:I,setLayoutObject:d,hasBlockChanged:M,setHasBlockChanged:C,blockDeleted:L,setBlockDeleted:A}=u.useContext(he),{showTShapeForm:b,tSquares:O,tCircles:l}=u.useContext(ve),S=de(),v=Ne(),[W,X]=u.useState(null),[G,Q]=u.useState("border");u.useState(0);const p=[...t,...o].find(g=>g._id===a),z=(p==null?void 0:p.blockType.toLowerCase())==="circle",P=g=>{X(N=>N===g?null:g)},K=g=>{Q(g.target.value)},D=async g=>{try{const N=await po(S.blockIdParam);A(!0),n(T=>T.filter(x=>x._id!==g)),r(T=>T.filter(x=>x._id!==g)),c(null),v(`/admin/designpage/${S.layoutIdParam}`),m()}catch(N){console.log("error:",N)}},Y=async g=>{const{name:N,type:T,checked:x,value:F}=g.target,B=T==="checkbox"?x:F;let k={...p,[N]:B};if(N==="borderSize"||N==="borderColor"){const R=["Left","Right","Bottom","Top"].reduce((H,V)=>(H[`border${V}Size`]=N==="borderSize"?B:p[`border${V}Size`],H[`border${V}Color`]=N==="borderColor"?B:p[`border${V}Color`],H),{});k={...k,...R}}(p.blockType.toLowerCase()==="circle"?n:r)(R=>R.map(H=>H._id===a?k:H)),d(R=>({...R,blocks:R.blocks.map(H=>H._id===a?k:H)})),["height","width"].includes(N)||f(a,k)},_=(g,N)=>{let T={...p,[g]:N};p.blockType.toLowerCase()==="circle"?n(x=>x.map(F=>F._id===a?T:F)):p.blockType.toLowerCase()==="square"&&r(x=>x.map(F=>F._id===a?T:F)),f(a,T)};return u.useEffect(()=>{if((p==null?void 0:p.blockType.toLowerCase())==="circle"){let g=document.getElementsByClassName("circle-shape");for(let N=0;N<t.length;N++)g[N].style.removeProperty("height"),g[N].style.removeProperty("width")}else if((p==null?void 0:p.blockType.toLowerCase())==="square"){let g=document.getElementsByClassName("square-shape");for(let N=0;N<o.length;N++)g[N].style.removeProperty("height"),g[N].style.removeProperty("width")}},[p]),s.jsx(s.Fragment,{children:h&&!b&&s.jsxs("div",{className:"block-form-container",ref:i,children:[s.jsxs("div",{children:[s.jsx("h1",{className:"block-form-title",children:"Block Tools"}),s.jsxs("div",{className:"shape-form-fields-container",children:[s.jsxs("div",{className:"block-dropdown-fields",children:[s.jsxs("div",{className:"dropdown-container",onClick:()=>P(1),children:[s.jsx("h1",{className:"block-input-title",children:"Size & Color"}),s.jsx("div",{className:W===1?"down-arrow":"up-arrow"})]}),s.jsxs("div",{className:W===1?"show-dropdown":"hide-dropdown",children:[s.jsx("div",{className:"shape-label-input-container",children:!z&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"shape-label-input",children:[s.jsx("label",{htmlFor:"height",children:"Heigth"}),s.jsx("input",{type:"number",name:"height",onChange:Y,value:p==null?void 0:p.height})]}),s.jsx("input",{type:"range",className:"range",name:"height",onChange:Y,value:p==null?void 0:p.height,min:10,max:500})]})}),s.jsxs("div",{className:"shape-label-input-container",children:[s.jsxs("div",{className:"shape-label-input",children:[s.jsx("label",{htmlFor:"width",children:z?"Size":"Width"}),s.jsx("input",{type:"number",name:"width",onChange:Y,value:p==null?void 0:p.width})]}),s.jsx("input",{type:"range",className:"range",name:"width",onChange:Y,value:p==null?void 0:p.width,min:10,max:1e3})]}),s.jsxs("div",{className:"shape-label-input-container",children:[s.jsxs("div",{className:"shape-label-input",children:[s.jsx("label",{htmlFor:"x",children:"X-Axis"}),s.jsx("input",{type:"number",name:"x",onChange:Y,value:p==null?void 0:p.x})]}),s.jsx("input",{type:"range",className:"range",name:"x",onChange:Y,value:p==null?void 0:p.x,min:10,max:1e3})]}),s.jsxs("div",{className:"shape-label-input-container",children:[s.jsxs("div",{className:"shape-label-input",children:[s.jsx("label",{htmlFor:"y",children:"Y-Axis"}),s.jsx("input",{type:"number",name:"y",onChange:Y,value:p==null?void 0:p.y})]}),s.jsx("input",{type:"range",className:"range",name:"y",onChange:Y,value:p==null?void 0:p.y,min:10,max:1e3})]}),s.jsx("div",{children:s.jsx("input",{type:"color",name:"backgroundColor",className:"shape-background-color",onChange:Y,value:p==null?void 0:p.backgroundColor})})]})]}),s.jsxs("div",{className:"block-dropdown-fields",children:[s.jsxs("div",{className:"dropdown-container",onClick:()=>P(2),children:[s.jsx("h1",{className:"block-input-title",children:"Text"}),s.jsx("div",{className:W===2?"down-arrow":"up-arrow"})]}),s.jsxs("div",{className:W===2?"":"hide-dropdown",children:[s.jsx("div",{className:"shape-label-name",children:s.jsx("input",{type:"text",name:"name",onChange:Y,value:p==null?void 0:p.name,className:"input-name-name",style:{width:`${Math.max(1,p==null?void 0:p.name.length)*10-10}px`,color:p==null?void 0:p.color}})}),s.jsxs("div",{className:"shape-label-input",children:[s.jsxs("div",{className:"text-color-input-container",children:[s.jsx("p",{id:"paragraphColorOpener",children:"A"}),s.jsx("input",{type:"color",name:"color",onChange:Y,value:p==null?void 0:p.color,id:"colorInput"})]}),s.jsx("input",{id:"fontsize-shapetools",type:"number",name:"fontSize",onChange:Y,value:p==null?void 0:p.fontSize})]}),s.jsx("p",{className:"align-text",children:"Align Text"}),s.jsxs("div",{className:"justify-content-input",children:[s.jsx("button",{type:"button",className:"justify-left",name:"justifyContent",onClick:()=>_("alignItems","flex-start")}),s.jsx("button",{type:"button",className:"justify-center",name:"justifyContent",onClick:()=>_("alignItems","center")}),s.jsx("button",{type:"button",className:"justify-right",name:"justifyContent",onClick:()=>_("alignItems","flex-end")})]}),s.jsxs("div",{className:"justify-content-input",children:[s.jsx("button",{type:"button",className:"align-left",name:"alignItems",onClick:()=>_("justifyContent","flex-start")}),s.jsx("button",{type:"button",className:"align-center",name:"alignItems",onClick:()=>_("justifyContent","center")}),s.jsx("button",{type:"button",className:"align-right",name:"alignItems",onClick:()=>_("justifyContent","flex-end")})]})]})]}),s.jsxs("div",{className:"block-dropdown-fields",children:[s.jsxs("div",{className:"dropdown-container",onClick:()=>P(3),children:[s.jsx("h1",{className:"block-input-title",children:"Border"}),s.jsx("div",{className:W===3?"down-arrow":"up-arrow"})]}),s.jsxs("div",{className:W===3?"show-input":"hide-dropdown",children:[s.jsxs("select",{onChange:K,value:G,className:"block-select-border",children:[s.jsx("option",{value:"border",children:"All"}),s.jsx("option",{value:"borderRight",children:"Right"}),s.jsx("option",{value:"borderLeft",children:"Left"}),s.jsx("option",{value:"borderTop",children:"Top"}),s.jsx("option",{value:"borderBottom",children:"Bottom"})]}),s.jsx("div",{className:"shape-label-input-container border-range",children:s.jsxs("div",{className:" special-input-size",children:[s.jsx("input",{type:"number",name:`${G}Size`,onChange:Y,value:p==null?void 0:p[`${G}Size`],className:"block-size-border-input"}),s.jsx("input",{type:"range",className:"range",name:`${G}Size`,onChange:Y,value:p==null?void 0:p[`${G}Size`],min:0,max:20})]})}),s.jsx("div",{className:"",children:s.jsx("input",{type:"color",name:`${G}Color`,onChange:Y,value:p==null?void 0:p[`${G}Color`],className:"border-color"})})]})]}),s.jsx("hr",{}),e,s.jsx("hr",{}),s.jsxs("div",{className:"block-ticket-prices-container",children:[s.jsx("h1",{className:"block-tickets-title",children:"Tickets"}),((y=p.tables)==null?void 0:y.length)>0&&s.jsxs("div",{className:"block-subtitle-container",children:[s.jsx("label",{className:"block-tickets-sub-title",htmlFor:"isMatched",children:"Divide Price Within Tables?"}),s.jsx("input",{type:"checkbox",name:"isMatched",onChange:Y,checked:p.isMatched}),s.jsxs("div",{class:"tooltip-container",children:[s.jsx("span",{class:"hover-me",children:"🤷🏻‍♂️"}),s.jsx("div",{class:"tooltip",children:s.jsx("p",{children:"The price below will be divided among tables"})})]})]}),s.jsxs("div",{className:"block-tickets-container",children:[!((E=p.tables)!=null&&E.length)&&s.jsxs("div",{className:"block-ticket-fields",children:[s.jsx("label",{htmlFor:"btickets",children:"Tickets"}),s.jsx("input",{type:"number",name:"btickets",onChange:Y,value:p==null?void 0:p.btickets})]}),s.jsxs("div",{className:p!=null&&p.isMatched?"block-ticket-fields":"bprice-false",children:[s.jsx("label",{htmlFor:"bprice",className:"bprice",children:"Price"}),s.jsx("input",{className:p!=null&&p.isMatched?"bprice":"bprice-false",type:"number",name:"bprice",onChange:Y,value:p==null?void 0:p.bprice})]})]})]})]})]}),s.jsx("div",{className:"delete-shape-form",children:s.jsx("button",{onClick:()=>D(a),className:"delete-block-form-button",children:"Delete"})})]})})},Pr=()=>{u.useContext(ve),u.useContext(ce);const{blockId:e,currentBlock:t,setCurrentBlock:o}=u.useContext(he),[n,r]=u.useState(null),[i,a]=u.useState(null),[c,h]=u.useState(null),[m,f]=u.useState(null),j=async O=>{try{const l=await Ft(O);l.success&&o(l.block)}catch(l){console.log("Find Block - Error:",l)}},w=(O,l,S)=>{const v={blockTableType:O,maxRow:l,maxCol:S};console.log("currentBlock",t),I(e,v)},I=async(O,l)=>{try{const S=await Ue(O,l);S.success&&o(S.block),console.log("ChangeBlock:",S)}catch(S){console.log("error:",S.response)}};u.useEffect(()=>{j(e)},[e,t==null?void 0:t.blockTableType,m,c]);const d=(O,l)=>{r(O),a(l)},M=()=>{r(null),a(null)},C=(O,l)=>{const S=O<=n&&l<=i,v=O<=(t==null?void 0:t.maxRow)&&l<=(t==null?void 0:t.maxCol);return S||v&&(t==null?void 0:t.maxRow)!==null&&(t==null?void 0:t.maxCol)!==null},L=4,A=5,b=()=>{let O=[];for(let l=1;l<=L;l++)for(let S=1;S<=A;S++)O.push(s.jsx("div",{className:`table-${t==null?void 0:t.blockTableType}-shape ${C(l,S)?"highlight":""}`,onMouseEnter:()=>d(l,S),onMouseLeave:M,onClick:()=>w(t==null?void 0:t.blockTableType,l,S)},`${l}-${S}`));return O};return s.jsxs("div",{className:"add-table-container",children:[s.jsx("h1",{className:"add-table-title",children:"Add Tables"}),!(t!=null&&t.blockTableType)&&s.jsxs("div",{className:"add-table-shapes",children:[s.jsx("div",{className:"add-table-circle",onClick:()=>w("circle")}),s.jsx("div",{className:"add-table-square",onClick:()=>w("square")})]}),(t==null?void 0:t.blockTableType)&&s.jsxs("div",{className:"table-hover-container-parent",children:[s.jsx("h1",{className:"rows-title",children:"Rows ------→"}),s.jsxs("div",{className:"table-hover-container",style:{gridTemplateColumns:`repeat(${A}, 1fr)`},children:[s.jsx("h1",{className:"spaced-item",style:{gridColumn:`1 / ${A+1}`},children:"Cols ------→"}),b()]})]})]})},Dr=ke.div`
  position: absolute;
  width: ${e=>{var t;return(t=e.tSquare)==null?void 0:t.width}}px;
  height: ${e=>{var t;return(t=e.tSquare)==null?void 0:t.height}}px;
  background-color: ${e=>{var t;return(t=e.tSquare)==null?void 0:t.backgroundColor}};
  /* border: ${e=>{var t;return(t=e.tSquare)==null?void 0:t.borderSize}}px solid
    ${e=>{var t;return(t=e.tSquare)==null?void 0:t.borderColor}}; */
  border-left: ${e=>{var t,o,n,r;return(t=e.tSquare)!=null&&t.borderLeftSize||((o=e.tSquare)==null?void 0:o.borderLeftSize)===0?(n=e.tSquare)==null?void 0:n.borderLeftSize:(r=e.tSquare)==null?void 0:r.borderSize}}px
    solid
    ${e=>{var t,o,n;return(t=e.tSquare)!=null&&t.borderLeftColor?(o=e.tSquare)==null?void 0:o.borderLeftColor:(n=e.tSquare)==null?void 0:n.borderColor}};
  border-right: ${e=>{var t,o,n,r;return(t=e.tSquare)!=null&&t.borderRightSize||((o=e.tSquare)==null?void 0:o.borderRightSize)===0?(n=e.tSquare)==null?void 0:n.borderRightSize:(r=e.tSquare)==null?void 0:r.borderSize}}px
    solid
    ${e=>{var t,o,n;return(t=e.tSquare)!=null&&t.borderRightColor?(o=e.tSquare)==null?void 0:o.borderRightColor:(n=e.tSquare)==null?void 0:n.borderColor}};
  border-bottom: ${e=>{var t,o,n,r;return(t=e.tSquare)!=null&&t.borderBottomSize||((o=e.tSquare)==null?void 0:o.borderBottomSize)===0?(n=e.tSquare)==null?void 0:n.borderBottomSize:(r=e.tSquare)==null?void 0:r.borderSize}}px
    solid
    ${e=>{var t,o,n;return(t=e.tSquare)!=null&&t.borderBottomColor?(o=e.tSquare)==null?void 0:o.borderBottomColor:(n=e.tSquare)==null?void 0:n.borderColor}};
  border-top: ${e=>{var t,o,n,r;return(t=e.tSquare)!=null&&t.borderTopSize||((o=e.tSquare)==null?void 0:o.borderTopSize)===0?(n=e.tSquare)==null?void 0:n.borderTopSize:(r=e.tSquare)==null?void 0:r.borderSize}}px
    solid
    ${e=>{var t,o,n;return(t=e.tSquare)!=null&&t.borderTopColor?(o=e.tSquare)==null?void 0:o.borderTopColor:(n=e.tSquare)==null?void 0:n.borderColor}};
  max-width: 100%;
  max-height: 100%;
  text-align: center;
  ${e=>e.resize?"resize:both; overflow: hidden;":""}
  transform: translate(
    ${e=>{var t;return(t=e.tSquare)==null?void 0:t.x}}px,
    ${e=>{var t;return(t=e.tSquare)==null?void 0:t.y}}px
  );
`,Ar=({tSquare:e,currentBlock:t,containerWidth:o,containerHeight:n})=>{const{blockId:r,showBShapeForm:i,setPriceUpdated:a,getThisBlock:c}=u.useContext(he),{setTSquares:h,updateTShape:m,setShowTShapeForm:f,tSquares:j,tSquareRef:w,tCircleRef:I,tShapeForm:d,setTableId:M,tableId:C,toggleTShapeForm:L,editingTables:A,setEditingTables:b,showTShapeForm:O}=u.useContext(ve),[l,S]=u.useState(null),{layoutBody:v}=u.useContext(ce),W=Ne(),X=de(),[G,Q]=u.useState(!1);u.useState(e==null?void 0:e.name);const[p,z]=u.useState({x:v.width/2-(e==null?void 0:e.width)/2,y:v.height/2});document.querySelector(".display-tables-container");const P=(o+e.borderSize)*.95/(l==null?void 0:l.maxCol),K=(n+e.borderSize)*.95/(l==null?void 0:l.maxRow),D=e.row<1?0:1,Y=e.col<1?0:1,_=e.col>1?P*.065:0,y=e.row>1?P*.065:0,E=Math.round(e.y/(K+y))+Y,g=Math.round(e.x/(P+_))+D,N=async $=>{try{const R=await Ft($);R.success&&e.block===$&&S(R.block)}catch(R){console.log("error:",R)}};u.useEffect(()=>{r&&N(r)},[r]),u.useEffect(()=>{const $=new ResizeObserver(R=>{for(let H of R){const{width:V}=H.contentRect,{height:Z}=H.contentRect;V&&Z&&(m(e._id,{width:V,height:Z}),e.block===(l==null?void 0:l._id)&&h(te=>te.map(ae=>ae._id===e._id?{...ae,width:V,height:Z}:ae)))}});return w.current&&$.observe(w.current),()=>{w.current&&$.unobserve(w.current)}},[]);const T={width:"100%",height:"100%",backgroundColor:e==null?void 0:e.backgroundColor,cursor:"grab",color:"white",justifyContent:e==null?void 0:e.justifyContent,alignItems:e==null?void 0:e.alignItems,fontSize:`${e==null?void 0:e.fontSize}px`},x=async($,R)=>{try{const H=await ut($,R);e.block===l._id&&h(V=>V.map(Z=>Z._id===$?{...H.table,row:E,col:g}:Z))}catch(H){console.log("error",H)}};u.useEffect(()=>{const $=R=>{const H=R.target.closest(".square-shape"),V=R.target.closest(".circle-shape");!H&&!V&&d.current&&!d.current.contains(R.target)&&(f(!1),M(null))};return document.addEventListener("mousedown",$),()=>{document.removeEventListener("mousedown",$)}},[w,d,I]);const F=$=>{f(!0),M($)},B=($,R)=>{const H={x:R.x,y:R.y};Q(!0),z(H),h(V=>V.map(Z=>Z._id===e._id?{...Z,x:H.x,y:H.y}:Z))};u.useEffect(()=>{const $=g>1?P*.065:0,R=E>1?P*.065:0;(async()=>{if(o&&n&&l&&e.block===l._id&&e._id){h(V=>V.map(Z=>Z._id===e._id?{...Z,width:P,height:K,x:(P+$)*(e.col-D),y:(K+R)*(e.row-Y),name:e.number,containerWidth:o/(l==null?void 0:l.maxCol),containerHeight:n/(l==null?void 0:l.maxRow)}:Z));try{b(!0),(await ut(e._id,{width:P,height:K,x:(P+$)*(e.col-D),y:(K+R)*(e.row-Y),containerWidth:o/(l==null?void 0:l.maxCol),containerHeight:n/(l==null?void 0:l.maxRow)})).success&&setTimeout(()=>{b(!1)},1e4)}catch(V){console.error("Failed to update table:",V)}}})()},[r,e._id,C,o,n,l]),u.useEffect(()=>{},[j]);const k=async $=>{try{const R=await Gt($);console.log("Table Deleted:",R),h(H=>H.filter(V=>V._id!==$)),M(null),W(`/admin/designpage/${X.layoutIdParam}`),L(),a(!0),c(e.block)}catch(R){console.log("error:",R.response)}};return s.jsx(We,{bounds:"parent",handle:".table-handle",onDrag:($,R)=>{B($,R)},position:{x:e==null?void 0:e.x,y:e==null?void 0:e.y},onStop:($,R)=>{G&&(x(e._id,p),Q(!1))},grid:[e.containerWidth,e.containerHeight],children:s.jsx(Dr,{ref:w,tabIndex:1,onClick:()=>{F(e._id)},tSquare:e,className:C===e._id&&O&&!i?"square-shape tables-shape focus-block":"square-shape tables-shape",children:s.jsxs("div",{className:"table-handle circle-name tables-one-shape",style:T,onDoubleClick:()=>{},children:[s.jsx("h1",{className:"delete-tables-before",onClick:()=>k(C),children:"X"}),s.jsx("h1",{children:e.number})]})})})},Mr=ke.div`
  width: ${e=>{var t;return(t=e.tCircle)==null?void 0:t.width}}px;
  height: ${e=>{var t;return(t=e.tCircle)==null?void 0:t.height}}px;
  border-radius: ${e=>{var t;return((t=e.tCircle)==null?void 0:t.borderRadius)||50}}%;
  background-color: ${e=>{var t;return(t=e.tCircle)==null?void 0:t.backgroundColor}};
  // border: ${e=>{var t;return(t=e.tCircle)==null?void 0:t.borderSize}}px solid
  //   ${e=>{var t;return(t=e.tCircle)==null?void 0:t.borderColor}};
  border-left: ${e=>{var t,o,n,r;return(t=e.tCircle)!=null&&t.borderLeftSize||((o=e.tCircle)==null?void 0:o.borderLeftSize)===0?(n=e.tCircle)==null?void 0:n.borderLeftSize:(r=e.tCircle)==null?void 0:r.borderSize}}px
    solid
    ${e=>{var t,o,n;return(t=e.tCircle)!=null&&t.borderLeftColor?(o=e.tCircle)==null?void 0:o.borderLeftColor:(n=e.tCircle)==null?void 0:n.borderColor}};
  border-right: ${e=>{var t,o,n,r;return(t=e.tCircle)!=null&&t.borderRightSize||((o=e.tCircle)==null?void 0:o.borderRightSize)===0?(n=e.tCircle)==null?void 0:n.borderRightSize:(r=e.tCircle)==null?void 0:r.borderSize}}px
    solid
    ${e=>{var t,o,n;return(t=e.tCircle)!=null&&t.borderRightColor?(o=e.tCircle)==null?void 0:o.borderRightColor:(n=e.tCircle)==null?void 0:n.borderColor}};
  border-bottom: ${e=>{var t,o,n,r;return(t=e.tCircle)!=null&&t.borderBottomSize||((o=e.tCircle)==null?void 0:o.borderBottomSize)===0?(n=e.tCircle)==null?void 0:n.borderBottomSize:(r=e.tCircle)==null?void 0:r.borderSize}}px
    solid
    ${e=>{var t,o,n;return(t=e.tCircle)!=null&&t.borderBottomColor?(o=e.tCircle)==null?void 0:o.borderBottomColor:(n=e.tCircle)==null?void 0:n.borderColor}};
  border-top: ${e=>{var t,o,n,r;return(t=e.tCircle)!=null&&t.borderTopSize||((o=e.tCircle)==null?void 0:o.borderTopSize)===0?(n=e.tCircle)==null?void 0:n.borderTopSize:(r=e.tCircle)==null?void 0:r.borderSize}}px
    solid
    ${e=>{var t,o,n;return(t=e.tCircle)!=null&&t.borderTopColor?(o=e.tCircle)==null?void 0:o.borderTopColor:(n=e.tCircle)==null?void 0:n.borderColor}};
  max-width: 100%;
  max-height: 100%;
  position: absolute;
  text-align: center;
  transform: translate(
    ${e=>{var t;return(t=e.tCircle)==null?void 0:t.x}}px,
    ${e=>{var t;return(t=e.tCircle)==null?void 0:t.y}}px
  );
`,Or=({tCircle:e,currentBlock:t,containerWidth:o,containerHeight:n})=>{const{blockId:r}=u.useContext(he),{setTCircles:i,updateTShape:a,setShowTShapeForm:c,tCircles:h,tSquareRef:m,tCircleRef:f,tShapeForm:j,setTableId:w,tableId:I,toggleTShapeForm:d,setEditingTables:M}=u.useContext(ve),[C,L]=u.useState(null),{layoutBody:A}=u.useContext(ce),b=Ne(),O=de(),[l,S]=u.useState(!1);u.useState(e==null?void 0:e.name);const[v,W]=u.useState({x:A.width/2-(e==null?void 0:e.width)/2,y:A.height/2});document.querySelector(".display-tables-container");const X=(o+e.borderSize)*.95/(C==null?void 0:C.maxCol),G=(n+e.borderSize)*.95/(C==null?void 0:C.maxRow),Q=e.row<1?0:1,p=e.col<1?0:1,z=e.col>1?X*.065:0,P=e.row>1?X*.065:0,K=Math.round(e.y/(G+P))+p,D=Math.round(e.x/(X+z))+Q,Y=async T=>{try{const x=await Ft(T);x.success&&e.block===T&&L(x.block)}catch(x){console.log("error:",x)}};u.useEffect(()=>{r&&Y(r)},[r]),u.useEffect(()=>{const T=new ResizeObserver(x=>{for(let F of x){const{width:B}=F.contentRect,{height:k}=F.contentRect;B&&k&&(a(e._id,{width:B,height:k}),e.block===(C==null?void 0:C._id)&&i($=>$.map(R=>R._id===e._id?{...R,width:B,height:k}:R)))}});return f.current&&T.observe(f.current),()=>{f.current&&T.unobserve(f.current)}},[]);const _={width:"100%",height:"100%",backgroundColor:e==null?void 0:e.backgroundColor,cursor:"grab",color:"white",borderRadius:"50%",justifyContent:e==null?void 0:e.justifyContent,alignItems:e==null?void 0:e.alignItems,fontSize:`${e==null?void 0:e.fontSize}px`},y=async(T,x)=>{try{const F=await ut(T,x);e.block===C._id&&i(B=>B.map(k=>k._id===T?{...F.table,row:K,col:D}:k))}catch(F){console.log("error",F)}};u.useEffect(()=>{const T=x=>{const F=x.target.closest(".tables-shapes"),B=x.target.closest(".tables-shapes");!F&&!B&&j.current&&!j.current.contains(x.target)&&(c(!1),w(null))};return document.addEventListener("mousedown",T),()=>{document.removeEventListener("mousedown",T)}},[m,j,f]);const E=T=>{c(!0),w(T)},g=(T,x)=>{const F={x:x.x,y:x.y};S(!0),W(F),i(B=>B.map(k=>k._id===e._id?{...k,x:F.x,y:F.y}:k))};u.useEffect(()=>{const T=D>1?X*.065:0,x=K>1?X*.065:0;(async()=>{if(o&&n&&C&&e.block===C._id&&e._id){i(B=>B.map(k=>k._id===e._id?{...k,width:X,height:G,x:(X+T)*(e.col-Q),y:(G+x)*(e.row-p),name:e.number,containerWidth:o/(C==null?void 0:C.maxCol),containerHeight:n/(C==null?void 0:C.maxRow)}:k));try{M(!0),(await ut(e._id,{width:X,height:G,x:(X+T)*(e.col-Q),y:(G+x)*(e.row-p),containerWidth:o/(C==null?void 0:C.maxCol),containerHeight:n/(C==null?void 0:C.maxRow)})).success&&setTimeout(()=>{M(!1)},1e4)}catch(B){console.error("Failed to update table:",B)}}})()},[r,e._id,I,o,n,C]);const N=async T=>{try{const x=await Gt(T);console.log("Table Deleted:",x),i(F=>F.filter(B=>B._id!==T)),w(null),b(`/admin/designpage/${O.layoutIdParam}`),getThisBlock(e.block),d()}catch(x){console.log("error:",x.response)}};return s.jsx(We,{bounds:"parent",handle:".table-handle",onDrag:(T,x)=>{g(T,x)},position:{x:e==null?void 0:e.x,y:e==null?void 0:e.y},onStop:(T,x)=>{l&&(y(e._id,v),S(!1))},grid:[o/(C==null?void 0:C.maxCol),n/(C==null?void 0:C.maxCol)],children:s.jsx(Mr,{ref:f,tabIndex:1,onMouseEnter:()=>w(e._id),onClick:()=>{E(e._id)},tCircle:e,className:"circle-shape tables-shapes",children:s.jsxs("div",{className:"table-handle circle-name tables-one-shape",style:_,onDoubleClick:()=>{},children:[s.jsx("h1",{children:e.number}),s.jsx("h1",{className:"delete-tables-before",onClick:()=>N(I),children:"X"})]})})})},Fr=({blockId:e})=>{const t=de();Ne();const{layoutId:o,setLayoutId:n}=u.useContext(ce),{tSquares:r,fetchTables:i,tableId:a,tCircles:c,containerRef:h,tShapeAdded:m,setTShapeAdded:f,tShapeEdited:j,setTShapeEdited:w,fetchTablesOnBlock:I}=u.useContext(ve),{currentBlock:d,hasBlockChanged:M,setHasBlockChanged:C}=u.useContext(he);u.useEffect(()=>{t.layoutIdParam&&n(t.layoutIdParam)},[t.layoutIdParam]);const L=u.useRef(null);return u.useEffect(()=>{i(t.layoutIdParam)},[]),u.useEffect(()=>{M&&(C(!1),I(e))},[M]),s.jsxs("div",{className:"display-tables-container",ref:L,children:[r&&r.map(A=>{var b,O;if(A.block==e)return s.jsx(Ar,{tSquare:A,currentBlock:A.block===(d==null?void 0:d._id)?d:null,containerWidth:(b=L==null?void 0:L.current)==null?void 0:b.offsetWidth,containerHeight:(O=L==null?void 0:L.current)==null?void 0:O.offsetHeight,blockId:e},A._id)}),c&&c.map(A=>{var b,O;if(A.block==e)return s.jsx(Or,{tCircle:A,currentBlock:A.block===(d==null?void 0:d._id)?d:null,containerWidth:(b=L==null?void 0:L.current)==null?void 0:b.offsetWidth,containerHeight:(O=L==null?void 0:L.current)==null?void 0:O.offsetHeight,blockId:e},A._id)})]})},Gr=()=>{const{tCircles:e,tSquares:t,setTCircles:o,setTSquares:n,tShapeForm:r,tableId:i,setTableId:a,showTShapeForm:c,toggleTShapeForm:h,updateTShape:m}=u.useContext(ve),{setPriceUpdated:f,setLayoutObject:j,blockId:w,layoutObject:I,getThisBlock:d}=u.useContext(he),M=de(),C=Ne(),[L,A]=u.useState(null),[b,O]=u.useState("border"),l=[...e,...t].find(p=>p._id===i),S=(l==null?void 0:l.tableType.toLowerCase())==="circle",v=p=>{A(z=>z===p?null:p)},W=p=>{O(p.target.value)},X=async p=>{try{const z=await Gt(p);console.log("Table Deleted:",z),o(P=>P.filter(K=>K._id!==p)),n(P=>P.filter(K=>K._id!==p)),a(null),C(`/admin/designpage/${M.layoutIdParam}`),h(),d(l.block),z.success&&f(!0)}catch(z){console.log("error:",z)}},G=p=>{const{name:z,value:P,type:K,checked:D}=p.target,Y=K==="checkbox"?D:K==="number"?parseFloat(P):P,_=g=>g.toLowerCase()==="circle"?o:n;let y={...l,[z]:Y};if(z==="borderSize"||z==="borderColor"){const g=["Left","Right","Bottom","Top"].reduce((N,T)=>(N[`border${T}Size`]=z==="borderSize"?Y:l[`border${T}Size`],N[`border${T}Color`]=z==="borderColor"?Y:l[`border${T}Color`],N),{});y={...y,...g}}_(l.tableType)(g=>g.map(N=>N._id===i?y:N)),j(g=>({...g,blocks:g.blocks.map(N=>{const T=N.tables.map(x=>x._id===i?{...x,[z]:Y}:x);return{...N,tables:T}})})),["height","width"].includes(z)||m(i,y)},Q=(p,z)=>{let P={...l,[p]:z};l.tableType.toLowerCase()==="circle"?o(K=>K.map(D=>D._id===i?P:D)):l.tableType.toLowerCase()==="square"&&n(K=>K.map(D=>D._id===i?P:D)),m(i,P)};return u.useEffect(()=>{if((l==null?void 0:l.tableType.toLowerCase())==="circle"){let p=document.getElementsByClassName("circle-shape");for(let z=0;z<e.length;z++)p[z].style.removeProperty("height"),p[z].style.removeProperty("width")}else if((l==null?void 0:l.tableType.toLowerCase())==="square"){let p=document.getElementsByClassName("square-shape");for(let z=0;z<t.length;z++)p[z].style.removeProperty("height"),p[z].style.removeProperty("width")}},[l]),console.log("currentTShape:",l),s.jsx(s.Fragment,{children:c&&s.jsxs("div",{className:"table-form-container",ref:r,children:[s.jsxs("div",{children:[s.jsx("h1",{className:"block-form-title",children:"Table Tools"}),s.jsxs("div",{className:"shape-form-fields-container",children:[s.jsxs("div",{className:"table-dropdown-fields",children:[s.jsxs("div",{className:"dropdown-container",onClick:()=>v(1),children:[s.jsx("h1",{className:"table-input-title",children:"Color"}),s.jsx("div",{className:L===1?"down-arrow":"up-arrow"})]}),s.jsxs("div",{className:L===1?"show-dropdown":"hide-dropdown",children:[s.jsx("div",{className:"shape-label-input-container",children:!S&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"shape-label-input",children:[s.jsx("label",{htmlFor:"height",children:"Heigth"}),s.jsx("input",{type:"number",name:"height",onChange:G,value:l==null?void 0:l.height})]}),s.jsx("input",{type:"range",className:"range",name:"height",onChange:G,value:l==null?void 0:l.height,min:10,max:500})]})}),s.jsxs("div",{className:"shape-label-input-container",children:[s.jsxs("div",{className:"shape-label-input",children:[s.jsx("label",{htmlFor:"width",children:S?"Size":"Width"}),s.jsx("input",{type:"number",name:"width",onChange:G,value:l==null?void 0:l.width})]}),s.jsx("input",{type:"range",className:"range",name:"width",onChange:G,value:l==null?void 0:l.width,min:10,max:1e3})]}),s.jsxs("div",{className:"shape-label-input-container",children:[s.jsxs("div",{className:"shape-label-input",children:[s.jsx("label",{htmlFor:"x",children:"X-Axis"}),s.jsx("input",{type:"number",name:"x",onChange:G,value:l==null?void 0:l.x})]}),s.jsx("input",{type:"range",className:"range",name:"x",onChange:G,value:l==null?void 0:l.x,min:10,max:1e3})]}),s.jsxs("div",{className:"shape-label-input-container",children:[s.jsxs("div",{className:"shape-label-input",children:[s.jsx("label",{htmlFor:"y",children:"Y-Axis"}),s.jsx("input",{type:"number",name:"y",onChange:G,value:l==null?void 0:l.y})]}),s.jsx("input",{type:"range",className:"range",name:"y",onChange:G,value:l==null?void 0:l.y,min:10,max:1e3})]}),s.jsx("div",{children:s.jsx("input",{type:"color",name:"backgroundColor",className:"shape-background-color",onChange:G,value:l==null?void 0:l.backgroundColor})})]})]}),s.jsxs("div",{className:"table-dropdown-fields",children:[s.jsxs("div",{className:"dropdown-container",onClick:()=>v(2),children:[s.jsx("h1",{className:"table-input-title",children:"Text"}),s.jsx("div",{className:L===2?"down-arrow":"up-arrow"})]}),s.jsxs("div",{className:L===2?"":"hide-dropdown",children:[s.jsxs("div",{className:"shape-label-input",children:[s.jsxs("div",{className:"text-color-input-container",children:[s.jsx("p",{id:"paragraphColorOpener",children:"A"}),s.jsx("input",{type:"color",name:"color",onChange:G,value:l==null?void 0:l.color,id:"colorInput"})]}),s.jsx("input",{id:"fontsize-shapetools",type:"number",name:"fontSize",onChange:G,value:l==null?void 0:l.fontSize})]}),s.jsx("p",{className:"align-text",children:"Align Text"}),s.jsxs("div",{className:"justify-content-input",children:[s.jsx("button",{type:"button",className:"justify-left",name:"justifyContent",onClick:()=>Q("alignItems","flex-start")}),s.jsx("button",{type:"button",className:"justify-center",name:"justifyContent",onClick:()=>Q("alignItems","center")}),s.jsx("button",{type:"button",className:"justify-right",name:"justifyContent",onClick:()=>Q("alignItems","flex-end")})]}),s.jsxs("div",{className:"justify-content-input",children:[s.jsx("button",{type:"button",className:"align-left",name:"alignItems",onClick:()=>Q("justifyContent","flex-start")}),s.jsx("button",{type:"button",className:"align-center",name:"alignItems",onClick:()=>Q("justifyContent","center")}),s.jsx("button",{type:"button",className:"align-right",name:"alignItems",onClick:()=>Q("justifyContent","flex-end")})]})]})]}),s.jsxs("div",{className:"table-dropdown-fields",children:[s.jsxs("div",{className:"dropdown-container",onClick:()=>v(3),children:[s.jsx("h1",{className:"table-input-title",children:"Border"}),s.jsx("div",{className:L===3?"down-arrow":"up-arrow"})]}),s.jsxs("div",{className:L===3?"show-input":"hide-dropdown",children:[s.jsxs("select",{onChange:W,value:b,className:"block-select-border",children:[s.jsx("option",{value:"border",children:"All"}),s.jsx("option",{value:"borderRight",children:"Right"}),s.jsx("option",{value:"borderLeft",children:"Left"}),s.jsx("option",{value:"borderTop",children:"Top"}),s.jsx("option",{value:"borderBottom",children:"Bottom"})]}),s.jsx("div",{className:"shape-label-input-container border-range",children:s.jsxs("div",{className:" special-input-size table-special-input",children:[s.jsx("input",{type:"number",name:`${b}Size`,onChange:G,value:l==null?void 0:l[`${b}Size`],className:"table-size-border-input"}),s.jsx("input",{type:"range",className:"table-range",name:`${b}Size`,onChange:G,value:l==null?void 0:l[`${b}Size`],min:0,max:20})]})}),s.jsx("div",{className:"",children:s.jsx("input",{type:"color",name:`${b}Color`,onChange:G,value:l==null?void 0:l[`${b}Color`],className:"border-color"})})]})]}),s.jsx("hr",{className:"table-hr"}),s.jsxs("div",{className:"table-ticket-prices-container",children:[s.jsx("h1",{className:"table-tickets-title",children:"Tickets"}),s.jsxs("div",{className:"block-subtitle-container",children:[s.jsx("label",{className:"block-tickets-sub-title",htmlFor:"isIncluded",children:"This Table Includes Tickets?"}),s.jsx("input",{defaultChecked:!0,type:"checkbox",name:"isIncluded",onChange:G,checked:l.isIncluded}),s.jsx("div",{className:"checkmark-two"})]}),s.jsxs("div",{className:"block-subtitle-container",children:[s.jsx("label",{className:"block-tickets-sub-title",htmlFor:"minimumConsumptionAvailable",children:"Has Minimum Consumption?"}),s.jsx("input",{type:"checkbox",name:"minimumConsumptionAvailable",onChange:G,checked:l.minimumConsumptionAvailable}),s.jsx("div",{className:"checkmark-two"})]}),s.jsxs("div",{className:"block-tickets-container",children:[s.jsxs("div",{className:"block-ticket-fields",children:[s.jsx("label",{htmlFor:"tprice",className:l!=null&&l.isBlockMatched?"tprice-false":"",children:"Table Price"}),s.jsx("input",{className:l!=null&&l.isBlockMatched?"tprice-false":"",type:"number",name:"tprice",onChange:G,value:l==null?void 0:l.tprice})]}),s.jsxs("div",{className:"block-ticket-fields quantity-container",children:[s.jsx("label",{htmlFor:"maxCapacity",children:"Max-Capacity"}),s.jsx("input",{type:"number",name:"maxCapacity",className:"quantity",value:l==null?void 0:l.maxCapacity,onChange:G,min:(l==null?void 0:l.ticketsIncluded)||0})]}),s.jsxs("div",{className:"block-ticket-fields quantity-container",children:[s.jsx("label",{htmlFor:"extraTickets",children:"Tickets Price"}),s.jsx("input",{type:"number",name:"extraTickets",className:"quantity",value:l==null?void 0:l.extraTickets,onChange:G})]}),(l==null?void 0:l.isIncluded)&&s.jsxs("div",{className:"block-ticket-fields quantity-container",children:[s.jsx("label",{htmlFor:"ticketsIncluded",children:"Tickets Included"}),s.jsx("input",{type:"number",name:"ticketsIncluded",className:"quantity",value:l==null?void 0:l.ticketsIncluded,onChange:G,max:l==null?void 0:l.maxCapacity})]}),(l==null?void 0:l.minimumConsumptionAvailable)&&s.jsxs("div",{className:"block-ticket-fields quantity-container",children:[s.jsx("label",{htmlFor:"minimumConsumption",children:"Min-Consumption"}),s.jsx("input",{type:"number",name:"minimumConsumption",className:"quantity",value:l==null?void 0:l.minimumConsumption,onChange:G})]})]})]})]})]}),s.jsx("div",{className:"delete-shape-form",children:s.jsx("button",{onClick:()=>X(i),className:"delete-table-form-button",children:"Delete"})})]})})};function gt(e,t){return e.map(function(o,n){return o+t[n]})}function Nt(e,t){return e.map(function(o,n){return o-t[n]})}function Je(e){return Math.hypot.apply(Math,e)}function Un(e,t){t===void 0&&(t=e);var o=Je(t),n=o===0?0:1/o,r=t.map(function(a){return n*a}),i=Je(e);return{distance:i,direction:r}}function Zn(e,t,o){var n=Je(t),r=n===0?0:1/n,i=o===0?0:1/o,a=i*n,c=t.map(function(f){return i*f}),h=t.map(function(f){return r*f}),m=Je(e);return{velocities:c,velocity:a,distance:m,direction:h}}function vt(e){return Math.sign?Math.sign(e):+(e>0)-+(e<0)||+e}function Wr(e,t,o){return Math.max(t,Math.min(e,o))}function Br(e,t){return Math.pow(e,t*5)}function hn(e,t,o){return t===0||Math.abs(t)===1/0?Br(e,o):e*t*o/(t+o*e)}function fn(e,t,o,n){return n===void 0&&(n=.15),n===0?Wr(e,t,o):e<t?-hn(t-e,o-t,n)+t:e>o?+hn(e-o,o-t,n)+o:e}function Hr(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Kr(e,t,o){return t&&Hr(e.prototype,t),e}function J(){return J=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},J.apply(this,arguments)}function $e(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function Yr(e,t){if(e==null)return{};var o={},n=Object.keys(e),r,i;for(i=0;i<n.length;i++)r=n[i],!(t.indexOf(r)>=0)&&(o[r]=e[r]);return o}function q(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Vr(e,t){if(e){if(typeof e=="string")return mn(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);if(o==="Object"&&e.constructor&&(o=e.constructor.name),o==="Map"||o==="Set")return Array.from(e);if(o==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return mn(e,t)}}function mn(e,t){(t==null||t>e.length)&&(t=e.length);for(var o=0,n=new Array(t);o<t;o++)n[o]=e[o];return n}function kt(e,t){var o;if(typeof Symbol>"u"||e[Symbol.iterator]==null){if(Array.isArray(e)||(o=Vr(e))||t){o&&(e=o);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}return o=e[Symbol.iterator](),o.next.bind(o)}function Jn(){}function Qn(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];return t.length===0?Jn:t.length===1?t[0]:function(){for(var n,r=kt(t),i;!(i=r()).done;){var a=i.value;n=a.apply(this,arguments)||n}return n}}function Se(e,t){if(e===void 0){if(t===void 0)throw new Error("Must define fallback value if undefined is expected");e=t}return Array.isArray(e)?e:[e,e]}function pn(e,t){return Object.assign({},t,e||{})}function bt(e){if(typeof e=="function"){for(var t=arguments.length,o=new Array(t>1?t-1:0),n=1;n<t;n++)o[n-1]=arguments[n];return e.apply(void 0,o)}else return e}function qe(e,t){e===void 0&&(e={});for(var o={},n=0,r=Object.entries(t);n<r.length;n++){var i=r[n],a=i[0],c=i[1];switch(typeof c){case"function":o[a]=c.call(o,e[a],a,e);break;case"object":o[a]=qe(e[a],c);break;case"boolean":c&&(o[a]=e[a]);break}}return o}function Xr(){try{return"constructor"in GestureEvent}catch{return!1}}function qn(){return typeof window<"u"&&"ontouchstart"in window}function Ur(){return typeof window<"u"&&"onpointerdown"in window}function eo(e){return"pointerId"in e?null:e.type==="touchend"?e.changedTouches:e.targetTouches}function Vt(e){return Array.from(eo(e)).map(function(t){return t.identifier})}function fe(e){var t="buttons"in e?e.buttons:0,o=e.shiftKey,n=e.altKey,r=e.metaKey,i=e.ctrlKey;return{buttons:t,shiftKey:o,altKey:n,metaKey:r,ctrlKey:i}}var et=function(t){return t};function De(e,t){t===void 0&&(t=et);var o=eo(e),n=o?o[0]:e,r=n.clientX,i=n.clientY;return t([r,i])}function gn(e,t,o){o===void 0&&(o=et);var n=Array.from(e.touches).filter(function(d){return t.includes(d.identifier)}),r=n[0],i=n[1];if(!r||!i)throw Error("The event doesn't have two pointers matching the pointerIds");var a=i.clientX-r.clientX,c=i.clientY-r.clientY,h=(i.clientX+r.clientX)/2,m=(i.clientY+r.clientY)/2,f=Math.hypot(a,c),j=-(Math.atan2(a,c)*180)/Math.PI,w=o([f,j]),I=o([h,m]);return{values:w,origin:I}}function Zr(e,t){t===void 0&&(t=et);var o=e.currentTarget,n=o.scrollX,r=o.scrollY,i=o.scrollLeft,a=o.scrollTop;return t([n||i||0,r||a||0])}var vn=40,bn=800;function to(e,t){t===void 0&&(t=et);var o=e.deltaX,n=e.deltaY,r=e.deltaMode;return r===1?(o*=vn,n*=vn):r===2&&(o*=bn,n*=bn),t([o,n])}function yn(e,t){return t===void 0&&(t=et),t([e.scale,e.rotation])}var Jr=180,Qr=.15,qr=.5,es=50,ts=250,no={threshold:function(t){return t===void 0&&(t=0),Se(t)},rubberband:function(t){switch(t===void 0&&(t=0),t){case!0:return Se(Qr);case!1:return Se(0);default:return Se(t)}},enabled:function(t){return t===void 0&&(t=!0),t},triggerAllEvents:function(t){return t===void 0&&(t=!1),t},initial:function(t){return t===void 0&&(t=0),typeof t=="function"?t:Se(t)},transform:!0},Xt=J({},no,{axis:!0,lockDirection:function(t){return t===void 0&&(t=!1),t},bounds:function(t){if(t===void 0&&(t={}),typeof t=="function")return function(j){return Xt.bounds(t(j))};var o=t,n=o.left,r=n===void 0?-1/0:n,i=o.right,a=i===void 0?1/0:i,c=o.top,h=c===void 0?-1/0:c,m=o.bottom,f=m===void 0?1/0:m;return[[r,a],[h,f]]}}),ns=typeof window<"u"&&window.document&&window.document.createElement,os={enabled:function(t){return t===void 0&&(t=!0),t},domTarget:!0,window:function(e){function t(o){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){return e===void 0&&(e=ns?window:void 0),e}),eventOptions:function(t){var o=t===void 0?{}:t,n=o.passive,r=n===void 0?!0:n,i=o.capture,a=i===void 0?!1:i;return{passive:r,capture:a}},transform:!0},rs=J({},no,{bounds:function(t,o,n){var r=n.distanceBounds,i=r===void 0?{}:r,a=n.angleBounds,c=a===void 0?{}:a,h=function(j){var w=pn(bt(i,j),{min:-1/0,max:1/0});return[w.min,w.max]},m=function(j){var w=pn(bt(c,j),{min:-1/0,max:1/0});return[w.min,w.max]};return typeof i!="function"&&typeof c!="function"?[h(),m()]:function(f){return[h(f),m(f)]}}}),ss=J({},Xt,{useTouch:function(t){t===void 0&&(t=!1);var o=qn(),n=Ur();return!!(t&&o||o&&!n)},experimental_preventWindowScrollY:function(t){return t===void 0&&(t=!1),t},threshold:function(t,o,n){var r=n.filterTaps,i=r===void 0?!1:r,a=n.lockDirection,c=a===void 0?!1:a,h=n.axis,m=h===void 0?void 0:h,f=Se(t,i?3:c||m?1:0);return this.filterTaps=i,f},swipeVelocity:function(t){return t===void 0&&(t=qr),Se(t)},swipeDistance:function(t){return t===void 0&&(t=es),Se(t)},swipeDuration:function(t){return t===void 0&&(t=ts),t},delay:function(t){switch(t===void 0&&(t=0),t){case!0:return Jr;case!1:return 0;default:return t}}});function is(e){return e===void 0&&(e={}),qe(e,os)}function $t(e){return e===void 0&&(e={}),qe(e,Xt)}function as(e){return e===void 0&&(e={}),qe(e,rs)}function ls(e){return e===void 0&&(e={}),qe(e,ss)}function cs(e,t){e===void 0&&(e={}),t===void 0&&(t=new Set);var o=e,n=o.drag,r=o.wheel,i=o.move,a=o.scroll,c=o.pinch,h=o.hover,m=o.eventOptions,f=o.window,j=o.transform,w=o.domTarget,I=o.enabled,d=is({domTarget:w,eventOptions:m,transform:j,window:f,enabled:I});return t.has("onDrag")&&(d.drag=ls(n)),t.has("onWheel")&&(d.wheel=$t(r)),t.has("onScroll")&&(d.scroll=$t(a)),t.has("onMove")&&(d.move=$t(i)),t.has("onPinch")&&(d.pinch=as(c)),t.has("onHover")&&(d.hover=J({enabled:!0},h)),d}function Ke(e){return J({_active:!1,_blocked:!1,_intentional:[!1,!1],_movement:[0,0],_initial:[0,0],_bounds:[[-1/0,1/0],[-1/0,1/0]],_threshold:[0,0],_lastEventType:void 0,_dragStarted:!1,_dragPreventScroll:!1,_dragIsTap:!0,_dragDelayed:!1,event:void 0,intentional:!1,values:[0,0],velocities:[0,0],delta:[0,0],movement:[0,0],offset:[0,0],lastOffset:[0,0],direction:[0,0],initial:[0,0],previous:[0,0],first:!1,last:!1,active:!1,timeStamp:0,startTime:0,elapsedTime:0,cancel:Jn,canceled:!1,memo:void 0,args:void 0},e)}function oo(){var e={hovering:!1,scrolling:!1,wheeling:!1,dragging:!1,moving:!1,pinching:!1,touches:0,buttons:0,down:!1,shiftKey:!1,altKey:!1,metaKey:!1,ctrlKey:!1,locked:!1},t=Ke({_pointerId:void 0,axis:void 0,xy:[0,0],vxvy:[0,0],velocity:0,distance:0,tap:!1,swipe:[0,0]}),o=Ke({_pointerIds:[],da:[0,0],vdva:[0,0],origin:void 0,turns:0}),n=Ke({axis:void 0,xy:[0,0],vxvy:[0,0],velocity:0,distance:0}),r=Ke({axis:void 0,xy:[0,0],vxvy:[0,0],velocity:0,distance:0}),i=Ke({axis:void 0,xy:[0,0],vxvy:[0,0],velocity:0,distance:0});return{shared:e,drag:t,pinch:o,wheel:n,move:r,scroll:i}}var me=new Map,ds=function(t){return t},ro=function(){function e(o,n){var r=this;n===void 0&&(n=[]),this.controller=o,this.args=n,this.debounced=!0,this.setTimeout=function(i,a){var c;a===void 0&&(a=140),clearTimeout(r.controller.timeouts[r.stateKey]);for(var h=arguments.length,m=new Array(h>2?h-2:0),f=2;f<h;f++)m[f-2]=arguments[f];r.controller.timeouts[r.stateKey]=(c=window).setTimeout.apply(c,[i,a].concat(m))},this.clearTimeout=function(){clearTimeout(r.controller.timeouts[r.stateKey])},this.fireGestureHandler=function(i){if(i===void 0&&(i=!1),r.state._blocked)return r.debounced||(r.state._active=!1,r.clean()),null;if(!i&&!r.state.intentional&&!r.config.triggerAllEvents)return null;if(r.state.intentional){var a=r.state.active,c=r.state._active;r.state.active=c,r.state.first=c&&!a,r.state.last=a&&!c,r.controller.state.shared[r.ingKey]=c}var h=r.controller.pointerIds.size||r.controller.touchIds.size,m=r.controller.state.shared.buttons>0||h>0,f=J({},r.controller.state.shared,r.state,r.mapStateValues(r.state),{locked:!!document.pointerLockElement,touches:h,down:m}),j=r.handler(f);return r.state.memo=j!==void 0?j:r.state.memo,f},this.controller=o,this.args=n}var t=e.prototype;return t.updateSharedState=function(n){Object.assign(this.controller.state.shared,n)},t.updateGestureState=function(n){Object.assign(this.state,n)},t.checkIntentionality=function(n,r){return{_intentional:n,_blocked:!1}},t.getMovement=function(n){var r=this.config.rubberband,i=this.state,a=i._bounds,c=i._initial,h=i._active,m=i._intentional,f=i.lastOffset,j=i.movement,w=i._threshold,I=this.getInternalMovement(n,this.state),d=m[0]===!1?xn(I[0],w[0]):m[0],M=m[1]===!1?xn(I[1],w[1]):m[1],C=this.checkIntentionality([d,M],I);if(C._blocked)return J({},C,{_movement:I,delta:[0,0]});var L=C._intentional,A=I,b=[L[0]!==!1?I[0]-L[0]:0,L[1]!==!1?I[1]-L[1]:0],O=gt(b,f),l=h?r:[0,0];return b=wn(a,gt(b,c),l),J({},C,{intentional:L[0]!==!1||L[1]!==!1,_initial:c,_movement:A,movement:b,values:n,offset:wn(a,O,l),delta:Nt(b,j)})},t.clean=function(){this.clearTimeout()},Kr(e,[{key:"config",get:function(){return this.controller.config[this.stateKey]}},{key:"enabled",get:function(){return this.controller.config.enabled&&this.config.enabled}},{key:"state",get:function(){return this.controller.state[this.stateKey]}},{key:"handler",get:function(){return this.controller.handlers[this.stateKey]}},{key:"transform",get:function(){return this.config.transform||this.controller.config.transform||ds}}]),e}();function xn(e,t){return Math.abs(e)>=t?vt(e)*t:!1}function wn(e,t,o){var n=t[0],r=t[1],i=o[0],a=o[1],c=e[0],h=c[0],m=c[1],f=e[1],j=f[0],w=f[1];return[fn(n,h,m,i),fn(r,j,w,a)]}function se(e,t,o){var n=e.state,r=t.timeStamp,i=t.type,a=n.values,c=o?0:r-n.startTime;return{_lastEventType:i,event:t,timeStamp:r,elapsedTime:c,previous:a}}function Ie(e,t,o,n){var r=e.state,i=e.config,a=e.stateKey,c=e.args,h=e.transform,m=r.offset,f=o.timeStamp,j=i.initial,w=i.bounds,I=i.threshold,d=Nt(h(I),h([0,0])).map(Math.abs),M=J({},oo()[a],{_active:!0,args:c,values:t,initial:n??t,_threshold:d,offset:m,lastOffset:m,startTime:f});return J({},M,{_initial:bt(j,M),_bounds:bt(w,M)})}var us=function(t){var o=this;this.classes=t,this.pointerIds=new Set,this.touchIds=new Set,this.supportsTouchEvents=qn(),this.supportsGestureEvents=Xr(),this.bind=function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];for(var a={},c=kt(o.classes),h;!(h=c()).done;){var m=h.value;new m(o,r).addBindings(a)}var f=function(I){oe(a,I,function(d){return o.nativeRefs[I](J({},o.state.shared,{event:d,args:r}))})};for(var j in o.nativeRefs)f(j);return o.config.domTarget?ps(o,a):gs(o,a)},this.effect=function(){return o.config.domTarget&&o.bind(),o.clean},this.clean=function(){var n=lo(o.config),r=o.config.eventOptions;n&&tt(n,ao(o.domListeners),r),Object.values(o.timeouts).forEach(clearTimeout),hs(o)},this.classes=t,this.state=oo(),this.timeouts={},this.domListeners=[],this.windowListeners={}};function so(e,t){"pointerId"in t?e.pointerIds.add(t.pointerId):e.touchIds=new Set(Vt(t))}function io(e,t){"pointerId"in t?e.pointerIds.delete(t.pointerId):Vt(t).forEach(function(o){return e.touchIds.delete(o)})}function hs(e){var t=e.config,o=t.window,n=t.eventOptions,r=e.windowListeners;if(o){for(var i in r){var a=r[i];tt(o,a,n)}e.windowListeners={}}}function fs(e,t,o){var n=e.config,r=e.windowListeners;o===void 0&&(o=n.eventOptions),n.window&&(tt(n.window,r[t],o),delete r[t])}function ms(e,t,o,n){var r=e.config,i=e.windowListeners;o===void 0&&(o=[]),n===void 0&&(n=r.eventOptions),r.window&&(tt(r.window,i[t],n),co(r.window,i[t]=o,n))}function ps(e,t){var o=e.config,n=e.domListeners,r=lo(o);if(!r)throw new Error("domTarget must be defined");var i=o.eventOptions;tt(r,ao(n),i);for(var a=0,c=Object.entries(t);a<c.length;a++){var h=c[a],m=h[0],f=h[1],j=m.slice(2).toLowerCase();n.push([j,Qn.apply(void 0,f)])}co(r,n,i)}function gs(e,t){for(var o=e.config,n={},r=o.eventOptions.capture?"Capture":"",i=0,a=Object.entries(t);i<a.length;i++){var c=a[i],h=c[0],m=c[1],f=Array.isArray(m)?m:[m],j=h+r;n[j]=Qn.apply(void 0,f)}return n}function ao(e){return e===void 0&&(e=[]),e.splice(0,e.length)}function lo(e){var t=e.domTarget;return t&&"current"in t?t.current:t}function oe(e,t,o){e[t]||(e[t]=[]),e[t].push(o)}function co(e,t,o){t===void 0&&(t=[]),o===void 0&&(o={});for(var n=kt(t),r;!(r=n()).done;){var i=r.value,a=i[0],c=i[1];e.addEventListener(a,c,o)}}function tt(e,t,o){t===void 0&&(t=[]),o===void 0&&(o={});for(var n=kt(t),r;!(r=n()).done;){var i=r.value,a=i[0],c=i[1];e.removeEventListener(a,c,o)}}function vs(e,t,o){o===void 0&&(o={});var n=ys(e),r=Ce.useMemo(function(){return new us(n)},[]);return r.config=t,r.handlers=e,r.nativeRefs=o,Ce.useEffect(r.effect,[]),r.config.domTarget?bs:r.bind}function bs(){}function ys(e){var t=new Set;return e.drag&&t.add(me.get("drag")),e.wheel&&t.add(me.get("wheel")),e.scroll&&t.add(me.get("scroll")),e.move&&t.add(me.get("move")),e.pinch&&t.add(me.get("pinch")),e.hover&&t.add(me.get("hover")),t}var Tt=function(e){$e(t,e);function t(){return e.apply(this,arguments)||this}var o=t.prototype;return o.getInternalMovement=function(r,i){return Nt(r,i.initial)},o.checkIntentionality=function(r,i){if(r[0]===!1&&r[1]===!1)return{_intentional:r,axis:this.state.axis};var a=i.map(Math.abs),c=a[0],h=a[1],m=this.state.axis||(c>h?"x":c<h?"y":void 0);return!this.config.axis&&!this.config.lockDirection?{_intentional:r,_blocked:!1,axis:m}:m?this.config.axis&&m!==this.config.axis?{_intentional:r,_blocked:!0,axis:m}:(r[m==="x"?1:0]=!1,{_intentional:r,_blocked:!1,axis:m}):{_intentional:[!1,!1],_blocked:!1,axis:m}},o.getKinematics=function(r,i){var a=this.getMovement(r);if(!a._blocked){var c=i.timeStamp-this.state.timeStamp;Object.assign(a,Zn(a.movement,a.delta,c))}return a},o.mapStateValues=function(r){return{xy:r.values,vxvy:r.velocities}},t}(ro),xs=3;function Cn(e){"persist"in e&&typeof e.persist=="function"&&e.persist()}var ws=function(e){$e(t,e);function t(){var n;return n=e.apply(this,arguments)||this,n.ingKey="dragging",n.stateKey="drag",n.setPointerCapture=function(r){if(!(n.config.useTouch||document.pointerLockElement)){var i=r.target,a=r.pointerId;i&&"setPointerCapture"in i&&i.setPointerCapture(a),n.updateGestureState({_dragTarget:i,_dragPointerId:a})}},n.releasePointerCapture=function(){if(!(n.config.useTouch||document.pointerLockElement)){var r=n.state,i=r._dragTarget,a=r._dragPointerId;if(a&&i&&"releasePointerCapture"in i&&(!("hasPointerCapture"in i)||i.hasPointerCapture(a)))try{i.releasePointerCapture(a)}catch{}}},n.preventScroll=function(r){n.state._dragPreventScroll&&r.cancelable&&r.preventDefault()},n.getEventId=function(r){return n.config.useTouch?r.changedTouches[0].identifier:r.pointerId},n.isValidEvent=function(r){return n.state._pointerId===n.getEventId(r)},n.shouldPreventWindowScrollY=n.config.experimental_preventWindowScrollY&&n.controller.supportsTouchEvents,n.setUpWindowScrollDetection=function(r){Cn(r),ms(n.controller,n.stateKey,[["touchmove",n.preventScroll],["touchend",n.clean.bind(q(n))],["touchcancel",n.clean.bind(q(n))]],{passive:!1}),n.setTimeout(n.startDrag.bind(q(n)),250,r)},n.setUpDelayedDragTrigger=function(r){n.state._dragDelayed=!0,Cn(r),n.setTimeout(n.startDrag.bind(q(n)),n.config.delay,r)},n.setStartState=function(r){var i=De(r,n.transform);n.updateSharedState(fe(r)),n.updateGestureState(J({},Ie(q(n),i,r),se(q(n),r,!0),{_pointerId:n.getEventId(r)})),n.updateGestureState(n.getMovement(i))},n.onDragStart=function(r){so(n.controller,r),!(!n.enabled||n.state._active)&&(n.setStartState(r),n.setPointerCapture(r),n.shouldPreventWindowScrollY?n.setUpWindowScrollDetection(r):n.config.delay>0?n.setUpDelayedDragTrigger(r):n.startDrag(r,!0))},n.onDragChange=function(r){if(!(n.state.canceled||!n.state._active||!n.isValidEvent(r)||n.state._lastEventType===r.type&&r.timeStamp===n.state.timeStamp)){var i;if(document.pointerLockElement){var a=r.movementX,c=r.movementY;i=gt(n.transform([a,c]),n.state.values)}else i=De(r,n.transform);var h=n.getKinematics(i,r);if(!n.state._dragStarted){if(n.state._dragDelayed){n.startDrag(r);return}if(n.shouldPreventWindowScrollY)if(!n.state._dragPreventScroll&&h.axis)if(h.axis==="x")n.startDrag(r);else{n.state._active=!1;return}else return;else return}var m=fe(r);n.updateSharedState(m);var f=se(q(n),r),j=Je(h._movement),w=n.state._dragIsTap;w&&j>=xs&&(w=!1),n.updateGestureState(J({},f,h,{_dragIsTap:w})),n.fireGestureHandler()}},n.onDragEnd=function(r){if(io(n.controller,r),!!n.isValidEvent(r)&&(n.clean(),!!n.state._active)){n.state._active=!1;var i=n.state._dragIsTap,a=n.state.velocities,c=a[0],h=a[1],m=n.state.movement,f=m[0],j=m[1],w=n.state._intentional,I=w[0],d=w[1],M=n.config.swipeVelocity,C=M[0],L=M[1],A=n.config.swipeDistance,b=A[0],O=A[1],l=n.config.swipeDuration,S=J({},se(q(n),r),n.getMovement(n.state.values)),v=[0,0];S.elapsedTime<l&&(I!==!1&&Math.abs(c)>C&&Math.abs(f)>b&&(v[0]=vt(c)),d!==!1&&Math.abs(h)>L&&Math.abs(j)>O&&(v[1]=vt(h))),n.updateSharedState({buttons:0}),n.updateGestureState(J({},S,{tap:i,swipe:v})),n.fireGestureHandler(n.config.filterTaps&&i===!0)}},n.clean=function(){e.prototype.clean.call(q(n)),n.state._dragStarted=!1,n.releasePointerCapture(),fs(n.controller,n.stateKey)},n.onCancel=function(){n.state.canceled||(n.updateGestureState({canceled:!0,_active:!1}),n.updateSharedState({buttons:0}),setTimeout(function(){return n.fireGestureHandler()},0))},n.onClick=function(r){n.state._dragIsTap||r.stopPropagation()},n}var o=t.prototype;return o.startDrag=function(r,i){i===void 0&&(i=!1),!(!this.state._active||this.state._dragStarted)&&(i||this.setStartState(r),this.updateGestureState({_dragStarted:!0,_dragPreventScroll:!0,cancel:this.onCancel}),this.clearTimeout(),this.fireGestureHandler())},o.addBindings=function(r){if(this.config.useTouch?(oe(r,"onTouchStart",this.onDragStart),oe(r,"onTouchMove",this.onDragChange),oe(r,"onTouchEnd",this.onDragEnd),oe(r,"onTouchCancel",this.onDragEnd)):(oe(r,"onPointerDown",this.onDragStart),oe(r,"onPointerMove",this.onDragChange),oe(r,"onPointerUp",this.onDragEnd),oe(r,"onPointerCancel",this.onDragEnd)),this.config.filterTaps){var i=this.controller.config.eventOptions.capture?"onClick":"onClickCapture";oe(r,i,this.onClick)}},t}(Tt),Cs=function(e){$e(t,e);function t(){return e.apply(this,arguments)||this}var o=t.prototype;return o.getInternalMovement=function(r,i){var a=i.values[1],c=r[0],h=r[1],m=h===void 0?a:h,f=m-a,j=i.turns;return Math.abs(f)>270&&(j+=vt(f)),Nt([c,m-360*j],i.initial)},o.getKinematics=function(r,i){var a=this.getMovement(r),c=(r[1]-a._movement[1]-this.state.initial[1])/360,h=i.timeStamp-this.state.timeStamp,m=Zn(a.movement,a.delta,h),f=Yr(m,["distance","velocity"]);return J({turns:c},a,f)},o.mapStateValues=function(r){return{da:r.values,vdva:r.velocities}},t}(ro),js=7,Ss=260,Ns=function(e){$e(t,e);function t(){var n;return n=e.apply(this,arguments)||this,n.ingKey="pinching",n.stateKey="pinch",n.onPinchStart=function(r){so(n.controller,r);var i=n.controller.touchIds;if(n.enabled&&!(n.state._active&&n.state._pointerIds.every(function(f){return i.has(f)}))&&!(i.size<2)){var a=Array.from(i).slice(0,2),c=gn(r,a,n.transform),h=c.values,m=c.origin;n.updateSharedState(fe(r)),n.updateGestureState(J({},Ie(q(n),h,r),se(q(n),r,!0),{_pointerIds:a,cancel:n.onCancel,origin:m})),n.updateGestureState(n.getMovement(h)),n.fireGestureHandler()}},n.onPinchChange=function(r){var i=n.state,a=i.canceled,c=i._active;if(!(a||!c||r.timeStamp===n.state.timeStamp)){var h=fe(r);n.updateSharedState(h);try{var m=gn(r,n.state._pointerIds,n.transform),f=m.values,j=m.origin,w=n.getKinematics(f,r);n.updateGestureState(J({},se(q(n),r),w,{origin:j})),n.fireGestureHandler()}catch{n.onPinchEnd(r)}}},n.onPinchEnd=function(r){io(n.controller,r);var i=Vt(r);n.state._pointerIds.every(function(a){return!i.includes(a)})||(n.clean(),n.state._active&&(n.updateGestureState(J({},se(q(n),r),n.getMovement(n.state.values),{_active:!1})),n.fireGestureHandler()))},n.onCancel=function(){n.state.canceled||(n.updateGestureState({_active:!1,canceled:!0}),setTimeout(function(){return n.fireGestureHandler()},0))},n.onGestureStart=function(r){if(n.enabled){r.preventDefault();var i=yn(r,n.transform);n.updateSharedState(fe(r)),n.updateGestureState(J({},Ie(q(n),i,r),se(q(n),r,!0),{origin:[r.clientX,r.clientY],cancel:n.onCancel})),n.updateGestureState(n.getMovement(i)),n.fireGestureHandler()}},n.onGestureChange=function(r){var i=n.state,a=i.canceled,c=i._active;if(!(a||!c)){r.preventDefault();var h=fe(r);n.updateSharedState(h);var m=yn(r,n.transform);m[0]=(m[0]-n.state.event.scale)*Ss+n.state.values[0];var f=n.getKinematics(m,r);n.updateGestureState(J({},se(q(n),r),f,{origin:[r.clientX,r.clientY]})),n.fireGestureHandler()}},n.onGestureEnd=function(r){n.clean(),n.state._active&&(n.updateGestureState(J({},se(q(n),r),n.getMovement(n.state.values),{_active:!1,origin:[r.clientX,r.clientY]})),n.fireGestureHandler())},n.wheelShouldRun=function(r){return n.enabled&&r.ctrlKey},n.getWheelValuesFromEvent=function(r){var i=to(r,n.transform),a=i[1],c=n.state.values,h=c[0],m=c[1],f=-a*js,j=h+f,w=m!==void 0?m:0;return{values:[j,w],origin:[r.clientX,r.clientY],delta:[f,w]}},n.onWheel=function(r){n.wheelShouldRun(r)&&(n.setTimeout(n.onWheelEnd),n.state._active?n.onWheelChange(r):n.onWheelStart(r))},n.onWheelStart=function(r){var i=n.getWheelValuesFromEvent(r),a=i.values,c=i.delta,h=i.origin;r.cancelable&&r.preventDefault(),n.updateSharedState(fe(r)),n.updateGestureState(J({},Ie(q(n),a,r,n.state.values),se(q(n),r,!0),{offset:a,delta:c,origin:h})),n.updateGestureState(n.getMovement(a)),n.fireGestureHandler()},n.onWheelChange=function(r){r.cancelable&&r.preventDefault(),n.updateSharedState(fe(r));var i=n.getWheelValuesFromEvent(r),a=i.values,c=i.origin,h=i.delta;n.updateGestureState(J({},se(q(n),r),n.getKinematics(a,r),{origin:c,delta:h})),n.fireGestureHandler()},n.onWheelEnd=function(){n.clean(),n.state._active&&(n.state._active=!1,n.updateGestureState(n.getMovement(n.state.values)),n.fireGestureHandler())},n}var o=t.prototype;return o.addBindings=function(r){this.controller.config.domTarget&&!this.controller.supportsTouchEvents&&this.controller.supportsGestureEvents?(oe(r,"onGestureStart",this.onGestureStart),oe(r,"onGestureChange",this.onGestureChange),oe(r,"onGestureEnd",this.onGestureEnd)):(oe(r,"onTouchStart",this.onPinchStart),oe(r,"onTouchMove",this.onPinchChange),oe(r,"onTouchEnd",this.onPinchEnd),oe(r,"onTouchCancel",this.onPinchEnd),oe(r,"onWheel",this.onWheel))},t}(Cs),ks=function(e){$e(t,e);function t(){var n;return n=e.apply(this,arguments)||this,n.ingKey="wheeling",n.stateKey="wheel",n.debounced=!0,n.handleEvent=function(r){if(!(r.ctrlKey&&"pinch"in n.controller.handlers)&&n.enabled){n.setTimeout(n.onEnd),n.updateSharedState(fe(r));var i=gt(to(r,n.transform),n.state.values);if(n.state._active)n.updateGestureState(J({},se(q(n),r),n.getKinematics(i,r)));else{n.updateGestureState(J({},Ie(q(n),i,r,n.state.values),se(q(n),r,!0)));var a=n.getMovement(i),c=Un(a.delta);n.updateGestureState(a),n.updateGestureState(c)}n.fireGestureHandler()}},n.onEnd=function(){if(n.clean(),!!n.state._active){var r=n.getMovement(n.state.values);n.updateGestureState(r),n.updateGestureState({_active:!1,velocities:[0,0],velocity:0}),n.fireGestureHandler()}},n}var o=t.prototype;return o.addBindings=function(r){oe(r,"onWheel",this.handleEvent)},t}(Tt),jn=function(e){$e(t,e);function t(){var n;return n=e.apply(this,arguments)||this,n.ingKey="moving",n.stateKey="move",n.debounced=!0,n.onMove=function(r){n.enabled&&(n.setTimeout(n.onMoveEnd),n.state._active?n.onMoveChange(r):n.onMoveStart(r))},n.onMoveStart=function(r){n.updateSharedState(fe(r));var i=De(r,n.transform);n.updateGestureState(J({},Ie(q(n),i,r),se(q(n),r,!0))),n.updateGestureState(n.getMovement(i)),n.fireGestureHandler()},n.onMoveChange=function(r){n.updateSharedState(fe(r));var i=De(r,n.transform);n.updateGestureState(J({},se(q(n),r),n.getKinematics(i,r))),n.fireGestureHandler()},n.onMoveEnd=function(){if(n.clean(),!!n.state._active){var r=n.state.values;n.updateGestureState(n.getMovement(r)),n.updateGestureState({velocities:[0,0],velocity:0,_active:!1}),n.fireGestureHandler()}},n.hoverTransform=function(){return n.controller.config.hover.transform||n.controller.config.transform},n.onPointerEnter=function(r){if(n.controller.state.shared.hovering=!0,!!n.controller.config.enabled){if(n.controller.config.hover.enabled){var i=De(r,n.hoverTransform()),a=J({},n.controller.state.shared,n.state,se(q(n),r,!0),{args:n.args,values:i,active:!0,hovering:!0});n.controller.handlers.hover(J({},a,n.mapStateValues(a)))}"move"in n.controller.handlers&&n.onMoveStart(r)}},n.onPointerLeave=function(r){if(n.controller.state.shared.hovering=!1,"move"in n.controller.handlers&&n.onMoveEnd(),!!n.controller.config.hover.enabled){var i=De(r,n.hoverTransform()),a=J({},n.controller.state.shared,n.state,se(q(n),r),{args:n.args,values:i,active:!1});n.controller.handlers.hover(J({},a,n.mapStateValues(a)))}},n}var o=t.prototype;return o.addBindings=function(r){"move"in this.controller.handlers&&oe(r,"onPointerMove",this.onMove),"hover"in this.controller.handlers&&(oe(r,"onPointerEnter",this.onPointerEnter),oe(r,"onPointerLeave",this.onPointerLeave))},t}(Tt),Ts=function(e){$e(t,e);function t(){var n;return n=e.apply(this,arguments)||this,n.ingKey="scrolling",n.stateKey="scroll",n.debounced=!0,n.handleEvent=function(r){if(n.enabled){n.clearTimeout(),n.setTimeout(n.onEnd);var i=Zr(r,n.transform);if(n.updateSharedState(fe(r)),n.state._active)n.updateGestureState(J({},se(q(n),r),n.getKinematics(i,r)));else{n.updateGestureState(J({},Ie(q(n),i,r,n.state.values),se(q(n),r,!0)));var a=n.getMovement(i),c=Un(a.delta);n.updateGestureState(a),n.updateGestureState(c)}n.fireGestureHandler()}},n.onEnd=function(){n.clean(),n.state._active&&(n.updateGestureState(J({},n.getMovement(n.state.values),{_active:!1,velocities:[0,0],velocity:0})),n.fireGestureHandler())},n}var o=t.prototype;return o.addBindings=function(r){oe(r,"onScroll",this.handleEvent)},t}(Tt),_s=/^on(Drag|Wheel|Scroll|Move|Pinch|Hover)/;function Es(e){var t={},o={},n=new Set;for(var r in e)_s.test(r)?(n.add(RegExp.lastMatch),o[r]=e[r]):t[r]=e[r];return[o,t,n]}function Is(e,t){t===void 0&&(t={});var o=Es(e),n=o[0],r=o[1],i=o[2];me.set("drag",ws),me.set("hover",jn),me.set("move",jn),me.set("pinch",Ns),me.set("scroll",Ts),me.set("wheel",ks);var a=cs(t,i),c={};return i.has("onDrag")&&(c.drag=Ye(n,"onDrag")),i.has("onWheel")&&(c.wheel=Ye(n,"onWheel")),i.has("onScroll")&&(c.scroll=Ye(n,"onScroll")),i.has("onMove")&&(c.move=Ye(n,"onMove")),i.has("onPinch")&&(c.pinch=Ye(n,"onPinch")),i.has("onHover")&&(c.hover=n.onHover),vs(c,a,r)}function Ye(e,t){var o=t+"Start",n=t+"End",r=function(a){var c=void 0;return a.first&&o in e&&e[o](a),t in e&&(c=e[t](a)),a.last&&n in e&&e[n](a),c};return r}const Ls=()=>{const e=Ne(),t=de(),{layoutDetails:o,setLayoutId:n,layoutId:r,floorPlan:i,toggleFloorPlan:a,layoutBody:c,setLayoutDetails:h,layoutRef:m}=u.useContext(ce),{showBShapeForm:f}=u.useContext(he),{showShapeForm:j}=u.useContext(ze),{showTShapeForm:w,editingTables:I,setEditingTables:d}=u.useContext(ve),M=u.useRef(null),C=()=>{I||e(`/admin/venuedetails/${o.venue}`)},L=()=>{e(`/admin/designpage/${t.layoutIdParam}/breakdown`)},[A,b]=u.useState(null),[O,l]=u.useState(!1);u.useState({x:0,y:0});const S=u.useRef(null),v=u.useRef(null);u.useEffect(()=>{t.layoutIdParam&&n(t.layoutIdParam)},[r]);const W=async(_,y)=>{try{let E=+(A+_).toFixed(3);if(E=Math.min(E,1),b(E),!y.pinching){const g=await rt(t.layoutIdParam,{displayScale:E})}h(g=>({...g,displayScale:E}))}catch(E){console.log("ZoomIncrease - Error:",E)}},X=async(_,y)=>{try{let E=+(A-_).toFixed(3);if(E=Math.max(E,.5),b(E),!y.pinching){const g=await rt(t.layoutIdParam,{displayScale:E})}h(g=>({...g,displayScale:E}))}catch(E){console.log("ZoomIncrease - Error:",E.response)}},G=async _=>{const{offset:y,axis:E,last:g}=_;if(E==="x"?y[0]:y[1],_.event.preventDefault(),_.first&&v.current&&(clearTimeout(v.current),v.current=null),h(N=>({...N,offSet:{x:y[0],y:y[1]}})),g){const N=y[0],T=y[1];v.current=setTimeout(async()=>{try{const x=await rt(t.layoutIdParam,{offSet:{x:N,y:T}})}catch(x){console.log("API Call Error:",x.response)}v.current=null},1e3)}};u.useLayoutEffect(()=>{o&&b(o==null?void 0:o.displayScale)},[o]);const Q=Is({onPinch:_=>{},onWheel:_=>{G(_)}},{domTarget:m,eventOptions:{passive:!1},touchAction:"none",pointer:{touch:!0}});u.useEffect(()=>()=>{S.current&&clearTimeout(S.current)},[]),u.useEffect(()=>()=>{v.current&&clearTimeout(v.current)},[]),u.useEffect(()=>{Q&&Q()},[Q,O]),u.useEffect(_=>{const y=(m==null?void 0:m.current)||null,E=()=>l(!0),g=()=>l(!1);if(y)return y.addEventListener("mouseenter",E),y.addEventListener("mouseleave",g),()=>{y.removeEventListener("mouseenter",E),y.removeEventListener("mouseleave",g)}},[]);const[p,z]=u.useState({width:window.innerWidth,height:window.innerHeight}),P=()=>{const _=document.querySelector(".design-page-container");let g=(_==null?void 0:_.offsetWidth)/1800;b(g),g=Math.min(Math.max(g,.5),1),h(N=>({...N,displayScale:g}))};u.useEffect(()=>(window.addEventListener("resize",P),()=>{window.removeEventListener("resize",P)}),[p]);const[K,D]=u.useState(!0),Y=()=>{P(),D(!1)};return u.useEffect(()=>{setTimeout(()=>{Y()},500)},[]),s.jsxs("div",{className:"design-big-container",ref:M,children:[s.jsxs("div",{className:"edit-modal-btns",children:[s.jsx("button",{onClick:C,className:I?"load-goback":"goback-btn-design",children:I?"Saving...":"Go Back"}),s.jsx("button",{className:"dashboard-btn",onClick:L,children:"Dashboard"})]}),s.jsxs("div",{className:"tools-title",children:[s.jsxs("div",{className:"design-container",children:[s.jsxs("div",{className:"design-header-container",children:[s.jsx("h1",{id:"design-layout-title",children:o&&o.name}),s.jsxs("div",{className:"zoom-controls",children:[s.jsxs("h1",{className:"scale-display",children:["Scale: ",Math.ceil((o==null?void 0:o.displayScale)*100),"%"]}),s.jsx("button",{onClick:_=>W(.05,_),children:"+"}),s.jsx("button",{children:"Zoom"}),s.jsx("button",{onClick:_=>X(.05,_),children:"-"})]})]}),s.jsx("div",{className:"design-main-content",style:{transform:`scale(${o==null?void 0:o.displayScale})`},children:s.jsxs(yr,{children:[s.jsx(kr,{}),s.jsx(Lr,{children:s.jsx(Fr,{})})]})})]}),s.jsx(Tr,{}),s.jsx(Rr,{children:s.jsx(Pr,{})}),s.jsx(Gr,{}),!j&&!f&&!w&&s.jsxs("div",{className:i||c.layoutType?"active-tools":"tools-container",children:[s.jsxs(wr,{children:[s.jsx("hr",{className:"hr-layout-tools"}),s.jsx(xr,{}),s.jsx(_r,{})]}),s.jsx("button",{className:i||c!=null&&c.layoutType?"toggle-floorplan":"hide",onClick:a,children:"Floor Plans"})]})]})]})};export{Ls as E};
